{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://frontend/./src/js/backend.js","webpack://frontend/./src/js/handlers.js","webpack://frontend/./src/js/ui.js","webpack://frontend/./src/js/ui/account.js","webpack://frontend/./src/js/ui/auth.js","webpack://frontend/./src/js/ui/checkbox.js","webpack://frontend/./src/js/ui/color.js","webpack://frontend/./src/js/ui/editor.js","webpack://frontend/./src/js/ui/image.js","webpack://frontend/./src/js/ui/note.js","webpack://frontend/./src/js/ui/position.js","webpack://frontend/./src/js/ui/selection.js","webpack://frontend/./src/js/ui/settings.js","webpack://frontend/webpack/bootstrap","webpack://frontend/webpack/runtime/define property getters","webpack://frontend/webpack/runtime/hasOwnProperty shorthand","webpack://frontend/webpack/runtime/make namespace object","webpack://frontend/./src/js/main.js"],"sourcesContent":["const API_URL = process.env.REACT_APP_API_URL;\r\nconst URL_NOTES_SERVICE = `${API_URL}/api/notes`;\r\nconst URL_AUTH_SERVICE = `${API_URL}/api/account`;\r\n\r\nconst expiresIn = 300000;\r\n\r\nexport class ListItem {\r\n    constructor(id, text, order, is_checked = false) {\r\n        this.id = id;\r\n        this.text = text;\r\n        this.order = order;\r\n        this.is_checked = is_checked;\r\n    }\r\n}\r\n\r\nexport class Note {\r\n    constructor(id, title, content, type, color, status = 'normal', list_items = [], image = null) {\r\n        this.id = id;\r\n        this.title = title;\r\n        this.content = content;\r\n        this.type = type;\r\n        this.color = color;\r\n        this.status = status;\r\n        this.list_items = list_items;\r\n        this.image = image;\r\n    }\r\n}\r\n\r\nexport async function getAccessToken() {\r\n    const token = localStorage.getItem('access');\r\n    if (!token || token === 'undefined') {\r\n        return null;\r\n    }\r\n\r\n    const expiry = localStorage.getItem('token_expiry');\r\n    const now = new Date().getTime();\r\n\r\n    if (expiry && now < expiry) {\r\n        return token;\r\n    } else {\r\n        return await refreshToken();\r\n    }\r\n}\r\n\r\nasync function refreshToken() {\r\n    const response = await fetch(`${URL_AUTH_SERVICE}/token/refresh/`, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ refresh: localStorage.getItem('refresh') })\r\n    });\r\n\r\n    if (!response.ok) {\r\n        localStorage.removeItem('access');\r\n        localStorage.removeItem('refresh');\r\n        localStorage.removeItem('token_expiry');\r\n        throw new Error('Failed to refresh token');\r\n    }\r\n\r\n    const data = await response.json();\r\n\r\n    const access_token = data.access;\r\n    const refresh_token = data.refresh;\r\n    const expiryTime = new Date().getTime() + expiresIn;\r\n\r\n    localStorage.setItem('token_expiry', expiryTime);\r\n    localStorage.setItem('refresh', refresh_token);\r\n    localStorage.setItem('access', access_token);\r\n\r\n    return access_token;\r\n}\r\n\r\nexport async function getUserInfo(token) {\r\n    const response = await fetch(`${URL_AUTH_SERVICE}/user/`, {\r\n        method: 'GET',\r\n        headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json',\r\n        }\r\n    });\r\n\r\n    if (!response.ok) {\r\n        throw new Error('Failed to get user info');\r\n    }\r\n\r\n    return response.json();\r\n}\r\n\r\nexport async function updateUser(token) {\r\n    // TODO: \r\n    const payload = {\r\n        first_name: 'Hello'\r\n    }\r\n\r\n    const response = await fetch(`${URL_AUTH_SERVICE}/user/`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(payload)\r\n    });\r\n\r\n    if (!response.ok) {\r\n        throw new Error('Failed to update user info');\r\n    }\r\n\r\n    return response.json();\r\n}\r\n\r\nasync function getNotesFromServer(params, token) {\r\n    let url = `${URL_NOTES_SERVICE}/notes/`;\r\n    url += `?`;\r\n    Object.keys(params).forEach(key => {\r\n        params[key].forEach(value => {\r\n            url += `${key}=${value}&`;\r\n        });\r\n    });\r\n\r\n    const finalUrl = url.slice(0, -1);\r\n\r\n    const response = await fetch(finalUrl, {\r\n        method: 'GET',\r\n        headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json'\r\n        }\r\n    });\r\n\r\n    if (!response.ok) {\r\n        throw new Error('Failed to get notes from server');\r\n    }\r\n\r\n    const data = await response.json();\r\n    console.log('DATA', data);\r\n    return data.reverse();\r\n}\r\n\r\nexport async function getDefaultNotesFromServer(token) {\r\n    const params = {\r\n        status: [\"normal\", \"pinned\"]\r\n    };\r\n    return getNotesFromServer(params, token);\r\n}\r\n\r\nexport async function getArchivedNotesFromServer(token) {\r\n    const params = {\r\n        status: [\"archived\"]\r\n    };\r\n    return getNotesFromServer(params, token);\r\n}\r\n\r\nexport async function getDeletedNotesFromServer(token) {\r\n    const params = {\r\n        status: [\"deleted\"]\r\n    };\r\n    return getNotesFromServer(params, token);\r\n}\r\n\r\nexport async function deleteNoteOnServer(noteId, token) {\r\n    console.log('deleteNoteOnServer');\r\n    let response = await fetch(`${URL_NOTES_SERVICE}/notes/${noteId}/`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n        }\r\n    });\r\n\r\n    if (!response.ok) {\r\n        throw new Error('Failed to delete note on server');\r\n    }\r\n\r\n    return response;\r\n}\r\n\r\nexport async function updateNoteOnServer(noteId, payload, token) {\r\n    console.log('updateNoteOnServer');\r\n    const formData = new FormData();\r\n\r\n    if (payload.hasOwnProperty('color')) {\r\n        formData.append('color', payload.color);\r\n    }\r\n\r\n    if (payload.hasOwnProperty('content')) {\r\n        formData.append('content', payload.content);\r\n    }\r\n\r\n    if (payload.hasOwnProperty('status')) {\r\n        formData.append('status', payload.status);\r\n    }\r\n\r\n    if (payload.hasOwnProperty('title')) {\r\n        formData.append('title', payload.title);\r\n    }\r\n\r\n    if (payload.hasOwnProperty('image') && payload.image) {\r\n        formData.append('image', payload.image);\r\n    }\r\n\r\n    if (payload.hasOwnProperty('list_items') && payload.list_items) {\r\n        payload.list_items.forEach((item, index) => {\r\n            formData.append(`list_items[${index}]id`, item.id);\r\n            formData.append(`list_items[${index}]text`, item.text);\r\n            formData.append(`list_items[${index}]order`, item.order);\r\n            formData.append(`list_items[${index}]is_checked`, item.is_checked);\r\n        });\r\n    }\r\n\r\n    const response = await fetch(`${URL_NOTES_SERVICE}/notes/${noteId}/`, {\r\n        method: 'PATCH',\r\n        body: formData,\r\n        headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n        },\r\n    });\r\n\r\n    if (!response.ok) {\r\n        throw new Error('Failed to update note on server');\r\n    }\r\n\r\n    return response.json();\r\n}\r\n\r\nexport async function archiveNote(noteId, isArchived, token) {\r\n    const payload = {\r\n        status: isArchived ? 'archived' : 'normal'\r\n    };\r\n\r\n    return updateNoteOnServer(noteId, payload, token);\r\n}\r\n\r\nexport async function moveToTrashNote(noteId, token) {\r\n    const payload = {\r\n        status: 'deleted'\r\n    };\r\n\r\n    return updateNoteOnServer(noteId, payload, token);\r\n}\r\n\r\nexport async function restoreNote(noteId, token) {\r\n    const payload = {\r\n        status: 'archived'\r\n    };\r\n\r\n    return updateNoteOnServer(noteId, payload, token);\r\n}\r\n\r\nexport async function searchNotes(searchText, token) {\r\n    const search = encodeURIComponent(searchText);\r\n    const url = `${URL_NOTES_SERVICE}/notes/?search=${search}`;\r\n\r\n    const response = await fetch(url, {\r\n        method: 'GET',\r\n        headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json',\r\n        }\r\n    });\r\n\r\n    if (!response.ok) {\r\n        throw new Error('Failed to search notes on server');\r\n    }\r\n\r\n    const data = await response.json();\r\n\r\n    return data;\r\n}\r\n\r\nexport async function loginUser(email, password) {\r\n    const response = await fetch(`${URL_AUTH_SERVICE}/token/`, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ email, password }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n        const errors = await response.json();\r\n        throw errors.detail;\r\n    }\r\n\r\n    const data = await response.json();\r\n\r\n    if (data.access) {\r\n        const expiryTime = new Date().getTime() + expiresIn;\r\n        localStorage.setItem('token_expiry', expiryTime);\r\n        localStorage.setItem('refresh', data.refresh);\r\n        localStorage.setItem('access', data.access);\r\n    }\r\n\r\n    return data;\r\n}\r\n\r\nexport async function registerUser(userData) {\r\n    const response = await fetch(`${URL_AUTH_SERVICE}/register/`, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(userData),\r\n    });\r\n\r\n    if (!response.ok) {\r\n        const errors = await response.json();\r\n        throw errors.detail;\r\n    }\r\n\r\n    return response.json();\r\n}\r\n\r\nexport async function createNote(payload, token) {\r\n    const formData = new FormData();\r\n    formData.append('color', payload.color);\r\n    formData.append('content', payload.content);\r\n    formData.append('title', payload.title);\r\n\r\n    if (payload.image) {\r\n        formData.append('image', payload.image);\r\n    }\r\n\r\n    if (payload.list_items) {\r\n        payload.list_items.forEach((item, index) => {\r\n            formData.append(`list_items[${index}]text`, item.text);\r\n            formData.append(`list_items[${index}]order`, item.order);\r\n            formData.append(`list_items[${index}]is_checked`, item.is_checked);\r\n        });\r\n    }\r\n\r\n    const response = await fetch(`${URL_NOTES_SERVICE}/notes/`, {\r\n        method: \"POST\",\r\n        body: formData,\r\n        headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n        }\r\n    });\r\n\r\n    if (!response.ok) {\r\n        throw new Error('Failed to create note on server');\r\n    }\r\n\r\n    return response.json();\r\n}\r\n\r\nexport async function fetchImage(url, token) {\r\n    const response = await fetch(url, {\r\n        method: 'GET',\r\n        headers: {\r\n            'Authorization': `Bearer ${token}`\r\n        }\r\n    });\r\n\r\n    if (!response.ok) {\r\n        throw new Error('Failed to fetch image');\r\n    }\r\n\r\n    const blob = await response.blob();\r\n    return URL.createObjectURL(blob);\r\n}\r\n\r\nexport async function checkIfEmailExistsAlready(email) {\r\n    const response = await fetch(`${URL_AUTH_SERVICE}/email/?email=${encodeURIComponent(email)}`, {\r\n        method: 'GET',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n    });\r\n\r\n    if (!response.ok) {\r\n        throw new Error('Failed to check if email already exists');\r\n    }\r\n\r\n    return response.json();\r\n}\r\n\r\nexport async function updateCheckbox(itemId, payload, token) {\r\n    const response = await fetch(`${URL_NOTES_SERVICE}/list-items/${itemId}/`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify(payload),\r\n    });\r\n\r\n    if (!response.ok) {\r\n        throw new Error('Failed to update checkbox on server');\r\n    }\r\n\r\n    return response.json();\r\n}\r\n\r\nexport async function deleteImage(noteId, token) {\r\n    console.log('deleteImage');\r\n\r\n    const response = await fetch(`${URL_NOTES_SERVICE}/notes/${noteId}/image/`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n        },\r\n    });\r\n\r\n    if (!response.ok) {\r\n        throw new Error('Failed to delete image on server');\r\n    }\r\n\r\n    return response;\r\n}","import { unfoldNoteInput, foldNoteInput, updateContentUIFromHash, loadDisplayMode, loadTheme, state, dom } from './ui.js';\r\n\r\nimport { moveToTrashNote, archiveNote, restoreNote, deleteNoteOnServer, searchNotes, ListItem, Note, loginUser, \r\n    registerUser, createNote, updateNoteOnServer, checkIfEmailExistsAlready, updateCheckbox, deleteCheckbox,\r\n    updateUser } from './backend.js';\r\n\r\nimport { createSignUpWindow, showLoginForm, showRegistrationForm, getTokenOrRedirect } from './ui/auth.js';\r\n\r\nimport { createCheckbox, insertNewCheckbox, focusOnNewCheckbox, splitTextAtCursor, createAndInsertNewCheckbox, \r\n    clearCheckboxesContainer, shiftAllCheckboxesDown, shiftAllCheckboxesUp } from './ui/checkbox.js';\r\n\r\nimport { setupNoteEditElements, pinNote, updateNoteEditIcons, updateNoteColor, updateNoteTitle,\r\n    updateNoteText, updateCheckboxes, updateImages, handleEmptyNote, resetNoteState } from './ui/editor.js';\r\n\r\nimport { addNoteToList, fillNotesContainer, deleteNoteFromContainer } from './ui/note.js';\r\n\r\nimport { createAccountContainer, hideAccountContainer, clearAccountContainer, showAccountContainer } from './ui/account.js';\r\n\r\nimport { positionElement, updateVisibility, updateNotePositions, adjustNoteEditBoxWidth,\r\n    updateListNotesContainerWidth, updateGridNotesContainerWidth } from './ui/position.js';\r\n\r\nimport { createImagesContainer, clearContainer, initImageFileInput } from './ui/image.js';\r\n\r\nimport { updateSelectedCount, hideSelectMode, modifySelectedNotes } from './ui/selection.js';\r\n\r\nimport { openSettingMenu, createSettingMenu } from './ui/settings.js';\r\n\r\nimport { createColorToolbar, applyColorToNotes } from './ui/color.js';\r\n\r\nexport function initHandlers() {\r\n    window.addEventListener('hashchange', updateContentUIFromHash);\r\n\r\n    window.addEventListener('scroll', function() {\r\n        const header = document.querySelector('header');\r\n      \r\n        if (window.scrollY > 0) {\r\n          header.classList.add('has-shadow');\r\n        } else {\r\n          header.classList.remove('has-shadow');\r\n        }\r\n    });\r\n\r\n    window.addEventListener('resize', (event) => {\r\n        adjustNoteEditBoxWidth();\r\n        updateGridNotesContainerWidth();\r\n\r\n        const settingMenu = document.querySelector('.setting-menu');\r\n        if (settingMenu) {\r\n            const windowWidth = window.innerWidth;\r\n            const settingButtonRect = dom.btnSettings.getBoundingClientRect();\r\n            const settingMenuPlace = settingMenu.getBoundingClientRect();\r\n    \r\n            let newLeft = settingButtonRect.left + window.scrollX;\r\n            if (newLeft + settingMenuPlace.width > windowWidth) {\r\n                newLeft = windowWidth - settingMenuPlace.width - 20;\r\n            }\r\n    \r\n            settingMenu.style.top = `${settingButtonRect.bottom + window.scrollY}px`;\r\n            settingMenu.style.left = `${newLeft}px`;\r\n        }\r\n    });\r\n\r\n    window.addEventListener('load', (event) => {\r\n        adjustNoteEditBoxWidth();\r\n\r\n        if (window.innerWidth >= 610) {\r\n            updateGridNotesContainerWidth();\r\n        }\r\n        else {\r\n            updateListNotesContainerWidth();\r\n        }\r\n    });\r\n\r\n    document.addEventListener('click', (event) => {\r\n        handleClickOutsideNoteForm(event);\r\n        handleClickOutsideChangeBackground(event);\r\n        handleClickOutsideUserAccount(event);\r\n        handleClickOutsideSelectMode(event);\r\n        handleClickOutsideSettingMenu(event);\r\n    });\r\n\r\n    dom.btnMenuArchive.addEventListener('click', () => {\r\n        window.location.hash = 'archive';\r\n    });\r\n    \r\n    dom.btnMenuTrash.addEventListener('click', () => {\r\n        window.location.hash = 'trash';\r\n    });\r\n    \r\n    dom.btnMenuNotes.addEventListener('click', () => {\r\n        window.location.hash = 'home';\r\n    });\r\n\r\n    dom.inputNoteCreate.addEventListener('focus', () => {\r\n        if (!state.isNoteInputUnfolded) {\r\n            unfoldNoteInput();\r\n        }\r\n    });\r\n\r\n    dom.inputNoteCreate.addEventListener('input', function() {\r\n        this.style.height = 'auto';\r\n        this.style.height = (this.scrollHeight) + 'px';\r\n    });\r\n\r\n    dom.inputTitleCreate.addEventListener('keydown', function(event) {\r\n        if (event.key === 'Enter') {\r\n            event.preventDefault();\r\n            dom.inputNoteCreate.focus();\r\n        }\r\n    });\r\n\r\n    dom.inputSearch.addEventListener('focus', (event) => {\r\n        dom.btnClearSearch.style.visibility = 'visible';\r\n        window.location.hash = 'search';\r\n    });\r\n\r\n    dom.inputSearch.addEventListener('keydown', async (event) => {\r\n        if (event.key === 'Enter') {\r\n            event.preventDefault();\r\n            \r\n            const searchText = dom.inputSearch.value.trim();\r\n            if (searchText !== '') {\r\n\r\n                let token = await getTokenOrRedirect();\r\n                if (!token) return;\r\n\r\n                // TODO: \r\n                dom.notesContainer.innerHTML = '';\r\n                dom.notesContainer.style.removeProperty('height');\r\n                dom.noteCreate.style.display = 'none';\r\n                \r\n                dom.notesContainer.appendChild(dom.pinnedText);\r\n                dom.notesContainer.appendChild(dom.othersText);\r\n\r\n                try {\r\n                    const data = await searchNotes(searchText, token);\r\n                    fillNotesContainer(data);\r\n                } catch(error) {\r\n                    console.log('Error: ', error);\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    dom.btnClearSearch.addEventListener('click', function(event) {\r\n        event.preventDefault();\r\n        if (dom.inputSearch.value.trim() !== '') {\r\n            dom.inputSearch.value = '';\r\n            dom.inputSearch.focus();\r\n        }\r\n        else {\r\n            dom.btnClearSearch.style.visibility = 'hidden';\r\n            window.location.hash = 'home';\r\n\r\n            dom.searchContainer.style.removeProperty('display');\r\n            dom.formSearch.style.removeProperty('background-color');\r\n        }\r\n    });\r\n\r\n    dom.btnClearSelection.addEventListener('click', () => {\r\n        hideSelectMode();\r\n        state.selectedCount = 0;\r\n    });\r\n\r\n    dom.btnMenuToggle.addEventListener('click', () => {\r\n        if (window.innerWidth >= 600) {\r\n            state.offsetMenuWidth = state.isMenuOpen ? 80 : 280;\r\n    \r\n            if (localStorage.getItem('displayMode') === 'list') {\r\n                updateListNotesContainerWidth();\r\n            }\r\n            else {\r\n                updateGridNotesContainerWidth();\r\n            }\r\n        }\r\n\r\n        dom.sidebarNav.classList.toggle('open');\r\n        dom.sideBar.classList.toggle('open');\r\n        state.isMenuOpen = !state.isMenuOpen;\r\n    });\r\n\r\n    dom.btnViewToggle.addEventListener('click', () => {\r\n        if (localStorage.getItem('displayMode') === 'list') {\r\n            dom.btnViewToggle.querySelector('i').className = 'fa-solid fa-table-list fa-lg';\r\n            dom.btnViewToggle.title = 'List view';\r\n            localStorage.setItem('displayMode', 'grid');\r\n            updateGridNotesContainerWidth();\r\n        } else {\r\n            dom.btnViewToggle.querySelector('i').className = 'fa-solid fa-table fa-lg';\r\n            dom.btnViewToggle.title = 'Grid view';\r\n            localStorage.setItem('displayMode', 'list');\r\n            updateListNotesContainerWidth();\r\n        }\r\n    });\r\n\r\n    dom.overlay.addEventListener('click', (event) => {\r\n        if (state.isNoteModificationMode) {\r\n            submitNoteModifications();\r\n        }\r\n\r\n        if (state.isSettingWindowOpen) {\r\n            document.querySelector('.settings-window').style.display = 'none';\r\n            state.isSettingWindowOpen = false;\r\n        }\r\n\r\n        const signUpWindow = document.querySelector('.signup-window');\r\n        if (signUpWindow) {\r\n            document.body.removeChild(signUpWindow);\r\n        }\r\n\r\n        dom.overlay.style.display = 'none';\r\n        document.body.style.removeProperty('overflow-y');\r\n        event.stopPropagation();\r\n    });\r\n\r\n    dom.btnEmptyTrash.addEventListener('click', async () => {\r\n        try {\r\n            let token = await getTokenOrRedirect();\r\n            if (!token) return;\r\n\r\n            const notes = Array.from(dom.notesContainer.querySelectorAll('.box-note'));\r\n            await Promise.all(notes.map(async note => {\r\n                const noteId = note.getAttribute('data-id');\r\n                await deleteNoteOnServer(noteId, token);\r\n                deleteNoteFromContainer(note);\r\n            }));\r\n    \r\n            dom.notesContainer.style.removeProperty('height');\r\n        } catch(error) {\r\n            console.log('Error: ', error);\r\n        }\r\n    });\r\n\r\n    dom.btnImageCreate.addEventListener('click', () => {\r\n        initImageFileInput(dom.imagesContainer);\r\n        if (!state.isNoteInputUnfolded) {\r\n            unfoldNoteInput();\r\n        }\r\n    });\r\n\r\n    dom.btnListCreate.addEventListener('click', () => {\r\n        if (state.isListItemsAddMode) {\r\n            return;\r\n        }\r\n        state.isListItemsAddMode = true;\r\n\r\n        unfoldNoteInput();\r\n        dom.inputNoteCreate.style.display = 'none';\r\n\r\n        dom.checkboxesContainer.style.display = 'block';\r\n        dom.checkboxesContainer.style.height = '32px';\r\n\r\n        dom.checkboxesContainer.appendChild(createCheckbox(true));\r\n        dom.formNoteCreate.insertBefore(dom.checkboxesContainer, dom.inputGroupCreate);\r\n    });\r\n\r\n    dom.btnLogin.addEventListener('click', (event) => {\r\n        event.preventDefault();\r\n        showAccountContainer();\r\n        clearAccountContainer();\r\n        createAccountContainer();\r\n    });\r\n\r\n    dom.btnSettings.addEventListener('click', () => {\r\n        if (state.isSettingMenuOpen) {\r\n            return;\r\n        }\r\n        state.isSettingMenuOpen = true;\r\n\r\n        let settingMenu = document.querySelector('.setting-menu');\r\n        if (!settingMenu) {\r\n            settingMenu = createSettingMenu();\r\n            document.body.appendChild(settingMenu);\r\n        }\r\n        else {\r\n            openSettingMenu(settingMenu);\r\n        }\r\n\r\n        positionElement(settingMenu, dom.btnSettings);\r\n    });\r\n\r\n    dom.btnEnterSearch.addEventListener('click', async function(event) {\r\n        event.preventDefault();\r\n\r\n        if (window.innerWidth < 795) {\r\n            dom.searchContainer.style.display = 'block';\r\n            dom.formSearch.style.backgroundColor = 'var(--search-form-bc)';\r\n        }\r\n\r\n        const searchText = dom.inputSearch.value.trim();\r\n        if (searchText === '') {\r\n          if (document.activeElement !== dom.inputSearch) {\r\n            dom.inputSearch.focus();\r\n          }\r\n        }\r\n        else {\r\n            try {\r\n                let token = await getTokenOrRedirect();\r\n                if (!token) return;\r\n            } catch(error) {\r\n                console.log('Error: ', error);\r\n            }\r\n\r\n            // TODO: \r\n            dom.notesContainer.innerHTML = '';\r\n            dom.notesContainer.style.removeProperty('height');\r\n            dom.noteCreate.style.display = 'none';\r\n    \r\n            dom.notesContainer.appendChild(dom.pinnedText);\r\n            dom.notesContainer.appendChild(dom.othersText);\r\n\r\n            try {\r\n                const data = await searchNotes(searchText, token);\r\n                fillNotesContainer(data);\r\n            } catch(error) {\r\n                console.log('Error: ', error);\r\n            }\r\n        }\r\n    });\r\n\r\n    dom.formNoteCreate.addEventListener('submit', (event) => {\r\n        event.preventDefault();\r\n        submitNote();\r\n    });\r\n\r\n    dom.btnBackgroundCreate.addEventListener('click', handleOneNoteColorClick);\r\n}\r\n\r\nfunction handleClickOutsideNoteForm(event) {\r\n    if (!event.target.closest('#note-form') && state.isNoteInputUnfolded) {\r\n        submitNote();\r\n        foldNoteInput();\r\n    }\r\n}\r\n\r\nfunction handleClickOutsideChangeBackground(event) {\r\n    const changeBackground = document.querySelector('.change-background');\r\n    if (changeBackground && !changeBackground.contains(event.target)) {\r\n        changeBackground.remove();\r\n    }\r\n}\r\n\r\nfunction handleClickOutsideUserAccount(event) {\r\n    if (!dom.userAccount.contains(event.target) && !dom.btnLogin.contains(event.target)) {\r\n        hideAccountContainer();\r\n    }\r\n}\r\n\r\nfunction handleClickOutsideSelectMode(event) {\r\n    const selectIconClicked = event.target.closest('.select-note-icon');\r\n    const clickedInsideSelectHeader = dom.headerSelection.contains(event.target);\r\n    if (!clickedInsideSelectHeader && !selectIconClicked) {\r\n        hideSelectMode();\r\n        state.selectedCount = 0;\r\n    }\r\n}\r\n\r\nfunction handleClickOutsideSettingMenu(event) {\r\n    const settingMenu = document.querySelector('.setting-menu');\r\n    if (state.isSettingMenuOpen && !dom.btnSettings.contains(event.target)) {\r\n        state.isSettingMenuOpen = false;\r\n        settingMenu.style.display = 'none';\r\n        settingMenu.tabIndex = '-1';\r\n    }\r\n}\r\n\r\nfunction removeFromArray(array, item) {\r\n    const index = array.indexOf(item);\r\n    if (index !== -1) {\r\n        array.splice(index, 1);\r\n    }\r\n}\r\n\r\nexport function handleThemeMenuItemClick(event) {\r\n    document.body.classList.toggle('dark-theme');\r\n    if (localStorage.getItem('theme') === 'light') {\r\n        localStorage.setItem('theme', 'dark');\r\n    }\r\n    else {\r\n        localStorage.setItem('theme', 'light');\r\n    }\r\n}\r\n\r\nexport function handleSignUpButtonClick(event) {\r\n    clearAccountContainer();\r\n    hideAccountContainer();\r\n\r\n    dom.overlay.style.display = 'block';\r\n    document.body.style.overflowY = 'hidden';\r\n\r\n    const signUpWindow = createSignUpWindow();\r\n    document.body.appendChild(signUpWindow);\r\n}\r\n\r\nexport async function handleEmailCheckClick(event) {\r\n    event.preventDefault();\r\n    const signUpInputContainer = event.target.closest('.signup-form').querySelector('.signup-input-container');\r\n    const emailInput = signUpInputContainer.querySelector('.email-input');\r\n    const signUpSubmitButton = signUpInputContainer.closest('.signup-form').querySelector('.signup-submit-button');\r\n\r\n    try {\r\n        const data = await checkIfEmailExistsAlready(emailInput.value.trim());\r\n\r\n        if (data.error) {\r\n            console.log('email error', data.error);\r\n        } \r\n        else if (data.exists) {\r\n            showLoginForm(signUpInputContainer);\r\n            signUpSubmitButton.addEventListener('click', handleLoginClick);\r\n            signUpSubmitButton.removeEventListener('click', handleEmailCheckClick);\r\n        }\r\n        else {\r\n            showRegistrationForm(signUpInputContainer);\r\n            signUpSubmitButton.addEventListener('click', handleRegisterClick);\r\n            signUpSubmitButton.removeEventListener('click', handleEmailCheckClick);\r\n        }\r\n    } catch (error) {\r\n        console.error(\"Error:\", error);\r\n    }\r\n}\r\n\r\nexport function handleTitleEditInput(event) {\r\n    const titleTextInput = event.target;\r\n    const titlePlaceHolder = event.target.closest('.note-title-text').querySelector('.title-placeholder');\r\n    if (titleTextInput.textContent.trim() === '') {\r\n        titlePlaceHolder.style.display = 'block';\r\n    } \r\n    else {\r\n        titlePlaceHolder.style.display = 'none';\r\n    }\r\n}\r\n\r\nexport function handleTitleEditKeydown(event) {\r\n    if (event.key === 'Enter') {\r\n        event.preventDefault();\r\n        event.target.closest('.note').querySelector('.note-text-input').focus();\r\n    }\r\n}\r\n\r\nexport function handleTextEditInput(event) {\r\n    const textEdit = event.target;\r\n    const textPlaceHolder = event.target.closest('.note-text').querySelector('.text-placeholder');\r\n    if (textEdit.textContent.trim() === '') {\r\n        textPlaceHolder.style.display = 'block';\r\n    } \r\n    else {\r\n        textPlaceHolder.style.display = 'none';\r\n    }\r\n}\r\n\r\nexport function handleEmptyCheckboxKeydown(event) {\r\n    if (event.key === 'Enter') {\r\n        event.preventDefault();\r\n    }\r\n}\r\n\r\nexport function handleCheckboxFocus(event) {\r\n    event.target.parentNode.querySelector('.checkbox-delete-button').style.opacity = '1';\r\n}\r\n\r\nexport function handleCheckboxBlur(event) {\r\n    event.target.parentNode.querySelector('.checkbox-delete-button').style.removeProperty('opacity');\r\n}\r\n\r\nexport function handleImageIconClick(event, imagesContainer) {\r\n    const file = event.target.files[0];\r\n\r\n    if (!file) {\r\n        // TODO:\r\n        alert('No file selected');\r\n        return;\r\n    }\r\n\r\n    const maxSizeInBytes = 10 * 1024 * 1024;\r\n    if (file.size > maxSizeInBytes) {\r\n        // TODO:\r\n        alert('File is too large. Maximum allowed size is 10MB.');\r\n        return;\r\n    }\r\n\r\n    const img = new Image();\r\n    img.onload = function() {\r\n        const maxPixels = 25 * 1024 * 1024;\r\n        const pixels = this.width * this.height;\r\n\r\n        if (pixels > maxPixels) {\r\n            alert('Image resolution is too high. Maximum allowed resolution is 25 megapixels.');\r\n            return;\r\n        }\r\n\r\n        createImagesContainer(this, imagesContainer);\r\n        updateNotePositions();\r\n    };\r\n    \r\n    img.src = URL.createObjectURL(file);\r\n}\r\n\r\nexport function handleOneNoteColorClick(event) {\r\n    const targetElement = event.target.closest('.box-note, #note-form');\r\n    const choosenColor = targetElement.getAttribute('data-color') || 'none';\r\n    createColorToolbar(event, choosenColor, false);\r\n    event.stopPropagation();\r\n}\r\n\r\nexport function handleSelectClick(event) {\r\n    const selectIcon = event.currentTarget;\r\n    const note = event.currentTarget.closest('.box-note');\r\n    const isSelected = note.getAttribute('data-selected') === 'true';\r\n\r\n    if (state.selectedCount === 0) {\r\n        dom.headerSelection.style.display = 'flex';\r\n        dom.headerSelection.style.opacity = '1';\r\n        dom.headerSelection.style.transform = 'translateY(0)';\r\n    }\r\n\r\n    if (isSelected) {\r\n        note.classList.remove('selected');\r\n        note.setAttribute('data-selected', 'false');\r\n        selectIcon.classList.remove('visible');\r\n        state.selectedCount--;\r\n        removeFromArray(state.selectedNotes, note);\r\n    } else {\r\n        note.classList.add('selected');\r\n        note.setAttribute('data-selected', 'true');\r\n        selectIcon.classList.add('visible');\r\n        state.selectedCount++;\r\n        state.selectedNotes.push(note);\r\n    }\r\n\r\n    if (state.selectedCount === 0) {\r\n        hideSelectMode();\r\n    }\r\n\r\n    updateSelectedCount(state.selectedCount);\r\n}\r\n\r\nexport async function handleMoveToTrashClick(event) {\r\n    const note = event.target.closest('.box-note');\r\n    const noteId = note.getAttribute('data-id');\r\n\r\n    try {\r\n        let token = await getTokenOrRedirect();\r\n        if (!token) return;\r\n\r\n        moveToTrashNote(noteId, token);\r\n    } catch(error) {\r\n        console.log('Error: ', error);\r\n    }\r\n\r\n    deleteNoteFromContainer(note);\r\n}\r\n\r\nexport async function handleArchiveClick(event) {\r\n    const note = event.target.closest('.box-note');\r\n    const noteId = note.getAttribute('data-id');\r\n    const isArchived = event.target.title === 'Archive' ? true : false;\r\n\r\n    try {\r\n        let token = await getTokenOrRedirect();\r\n        if (!token) return;\r\n\r\n        await archiveNote(noteId, isArchived, token);\r\n    } catch(error) {\r\n        console.log('Error: ', error);\r\n    }\r\n\r\n    deleteNoteFromContainer(note);\r\n}\r\n\r\nexport async function handleRestoreClick(event) {\r\n    const noteElement = event.target.closest('.box-note');\r\n    const noteId = noteElement.getAttribute('data-id');\r\n\r\n    try {\r\n        let token = await getTokenOrRedirect();\r\n        if (!token) return;\r\n\r\n        restoreNote(noteId, token);\r\n    } catch(error) {\r\n        console.log('Error: ', error);\r\n    }\r\n\r\n    deleteNoteFromContainer(noteElement);\r\n}\r\n\r\nexport async function handleDeleteForeverClick(event) {\r\n    const note = event.target.closest('.box-note');\r\n    const noteId = note.getAttribute('data-id');\r\n\r\n    try {\r\n        let token = await getTokenOrRedirect();\r\n        if (!token) return;\r\n\r\n        await deleteNoteOnServer(noteId, token);\r\n    } catch(error) {\r\n        console.log('Error: ', error);\r\n    }\r\n\r\n    deleteNoteFromContainer(note);\r\n}\r\n \r\nexport async function handlePinIconClick(event) {\r\n    const note = event.target.closest('.box-note');\r\n    await pinNote(note, event.target);\r\n    updateVisibility();\r\n    updateNotePositions();\r\n}\r\n\r\nexport function handleNoteEditClick(event) {\r\n    // TODO:\r\n    if (event.target.classList.contains('pin-icon') \r\n        || event.target.classList.contains('check-icon') \r\n        || event.target.classList.contains('new-checkbox-icon')\r\n        || (event.target.classList.contains('img-delete'))) {\r\n        return;\r\n    }\r\n\r\n    state.isNoteModificationMode = true;\r\n\r\n    // TODO: currentNote => backend note.id\r\n    state.currentNote = Array.from(event.target.closest('.note').children).find(child => \r\n        child.classList.contains('text-and-title-note'));\r\n\r\n    dom.overlay.style.display = 'block';\r\n    document.body.style.overflowY = 'hidden';\r\n\r\n    const originalBoxNote = state.currentNote.closest('.box-note');\r\n    const noteEdit = originalBoxNote.cloneNode(true);\r\n    noteEdit.style.transform = 'none';\r\n    noteEdit.style.position = 'relative';\r\n    noteEdit.style.margin = '0';\r\n    noteEdit.querySelector('.text-and-title-note').style.overflowY = 'auto';\r\n    noteEdit.querySelector('.text-and-title-note').style.maxHeight = '482px';\r\n    originalBoxNote.style.opacity = '0';\r\n\r\n    updateNoteEditIcons(noteEdit);\r\n    setupNoteEditElements(originalBoxNote, noteEdit);\r\n\r\n    dom.noteEditContainer.style.display = 'block';\r\n    dom.noteEditContainer.appendChild(noteEdit);\r\n    document.body.appendChild(dom.noteEditContainer);\r\n    adjustNoteEditBoxWidth();        \r\n}\r\n\r\nexport function handleColorOptionClick(event, note = null) {\r\n    const colorOption = event.target.closest('.color-option');\r\n    highlightChosenColor(colorOption);\r\n    applyColorToNotes(note ? [note] : state.selectedNotes, colorOption.className.split(' ')[1]);\r\n    event.stopPropagation();\r\n}\r\n\r\nfunction highlightChosenColor(selectedOption) {\r\n    document.querySelectorAll('.color-option').forEach(option => {\r\n        option.classList.remove('chosen');\r\n        option.querySelector('.select-color-icon').style.display = 'none';\r\n    });\r\n\r\n    selectedOption.classList.add('chosen');\r\n    selectedOption.querySelector('.select-color-icon').style.display = 'inline-block';\r\n}\r\n\r\nexport function handleCheckboxKeydown(event) {\r\n    const checkboxText = event.target;\r\n    const oneCheckbox = checkboxText.closest('.checkbox');\r\n\r\n    if (event.key === 'Enter') {\r\n        event.preventDefault();\r\n        const cursorPosition = window.getSelection().getRangeAt(0).endOffset;\r\n        const cursorAtEnd = cursorPosition === checkboxText.textContent.length;\r\n        \r\n        // TODO\r\n        const nextCheckbox = oneCheckbox.nextElementSibling;\r\n        if (nextCheckbox && nextCheckbox.classList.contains('checkbox')) {\r\n\r\n            if (nextCheckbox.classList.contains('empty-checkbox') && cursorAtEnd) {\r\n                nextCheckbox.querySelector('.checkbox-text').focus();\r\n            } else {\r\n                const remainingText = splitTextAtCursor(checkboxText, cursorPosition);\r\n                shiftAllCheckboxesDown(nextCheckbox, 32);\r\n        \r\n                const newCheckbox = createAndInsertNewCheckbox(oneCheckbox, remainingText);\r\n                newCheckbox.querySelector('.checkbox-text').focus();;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport async function handleCheckboxIconClick(event) {\r\n    const icon = handleEditorCheckboxClick(event);\r\n    const itemId = icon.closest('.checkbox').getAttribute('data-listitem-id');\r\n    if (itemId) {\r\n        const isChecked = icon.classList.contains('fa-square-check');\r\n        const payload = {\r\n            is_checked: isChecked\r\n        };\r\n\r\n        try {\r\n            let token = await getTokenOrRedirect();\r\n            if (!token) return;\r\n\r\n            const data = await updateCheckbox(itemId, payload, token);\r\n            console.log('Success:', data);\r\n        } catch (error) {\r\n            console.error(\"Error:\", error);\r\n        }\r\n    }\r\n}\r\n\r\nexport function handleEditorCheckboxClick(event) {\r\n    const icon = event.target;\r\n    const text = icon.closest('.checkbox').querySelector('.checkbox-text');\r\n\r\n    if (icon.classList.contains('fa-square')) {\r\n        icon.classList.remove('fa-square');\r\n        icon.classList.add('fa-square-check');\r\n        text.style.textDecoration = 'line-through';\r\n        text.style.opacity = '0.7';\r\n    }\r\n    else {\r\n        icon.classList.remove('fa-square-check');\r\n        icon.classList.add('fa-square');\r\n        text.style.removeProperty('text-decoration');\r\n        text.style.opacity = '1';\r\n    }\r\n    return icon;\r\n}\r\n\r\nexport async function handleCheckboxDeleteClick(event) {\r\n    const checkbox = event.target.closest('.checkbox');\r\n    const currentHeight = parseFloat(checkbox.parentNode.style.height) || 32;\r\n    checkbox.parentNode.style.height = `${currentHeight - 32}px`;\r\n\r\n    const next = checkbox.nextElementSibling;\r\n    const prev = checkbox.previousElementSibling;\r\n    if (prev) {\r\n        prev.querySelector('.checkbox-text').focus();\r\n    }\r\n    else {\r\n        next.querySelector('.checkbox-text').focus();\r\n    }\r\n    checkbox.parentNode.removeChild(checkbox);\r\n\r\n    shiftAllCheckboxesUp(next, 32);\r\n}\r\n\r\nexport function handleCheckboxBackspace(event) {\r\n    const text = event.target;\r\n    const container = text.closest('.checkboxes-container');\r\n    \r\n    if (event.key === 'Backspace' && text.textContent.trim() === '') {\r\n        if (container.childElementCount > 2) {\r\n            handleCheckboxDeleteClick(event);\r\n        }\r\n    }\r\n}\r\n\r\nexport function handleEmptyCheckboxInput(event) {\r\n    const text = event.target;\r\n    const checkbox = text.closest('.checkbox');\r\n\r\n    if (text.textContent.trim().length > 0) {\r\n        const newCheckbox = createCheckbox(false, false, text.textContent);\r\n        newCheckbox.style.transform = checkbox.style.transform;\r\n\r\n        insertNewCheckbox(checkbox, newCheckbox);\r\n        shiftAllCheckboxesDown(checkbox);\r\n        focusOnNewCheckbox(newCheckbox);\r\n\r\n        text.textContent = '';\r\n    }\r\n}\r\n\r\nexport async function handleLoginClick(event) {\r\n    event.preventDefault();\r\n\r\n    const container = event.target.closest('.signup-form').querySelector('.signup-input-container');\r\n    const email = container.querySelector('.email-input');\r\n    const password = container.querySelector('.password-input');\r\n\r\n    const emailError = container.querySelector('.email-error');\r\n    emailError.textContent = '';\r\n\r\n    try {\r\n        await loginUser(email.value.trim(), password.value.trim());\r\n        dom.overlay.click();\r\n        updateContentUIFromHash();\r\n    } catch(error) {\r\n        handleLoginErrors(error, emailError);\r\n    }\r\n}\r\n\r\nexport async function handleRegisterClick(event) {\r\n    event.preventDefault();\r\n    const container = event.target.closest('.signup-form').querySelector('.signup-input-container');\r\n    const emailError = container.querySelector('.email-error');\r\n    const passwordError = container.querySelector('.password-error');\r\n    const confirmError = container.querySelector('.confirm-error');\r\n    const firstNameError = container.querySelector('.first-name-error');\r\n    const lastNameError = container.querySelector('.last-name-error');\r\n\r\n    clearMessages([emailError, passwordError, confirmError, firstNameError, lastNameError]);\r\n\r\n    const userData = {\r\n        email: container.querySelector('.email-input').value.trim(),\r\n        password: container.querySelector('.password-input').value.trim(),\r\n        password2: container.querySelector('.confirm-input').value.trim(),\r\n        first_name: container.querySelector('.first-name-input').value.trim(),\r\n        last_name: container.querySelector('.last-name-input').value.trim(),\r\n    };\r\n\r\n    try {\r\n        await registerUser(userData);\r\n        await loginUser(userData.email, userData.password);\r\n        dom.overlay.click();\r\n        updateContentUIFromHash();\r\n    } catch (error) {\r\n        handleRegistrationErrors(error, { emailError, passwordError, confirmError, firstNameError, lastNameError });\r\n    }\r\n}\r\n\r\nfunction clearMessages(messages) {\r\n    messages.forEach(message => message.textContent = '');\r\n}\r\n\r\nfunction handleRegistrationErrors(errors, errorElements) {\r\n    if (!errors) return;\r\n\r\n    if (errors.email) errorElements.emailError.textContent = errors.email.join(' ');\r\n    if (errors.password) errorElements.passwordError.textContent = errors.password.join(' ');\r\n    if (errors.password2) errorElements.confirmError.textContent = errors.password2.join(' ');\r\n    if (errors.first_name) errorElements.firstNameError.textContent = errors.first_name.join(' ');\r\n    if (errors.last_name) errorElements.lastNameError.textContent = errors.last_name.join(' ');\r\n    if (errors.detail) errorElements.emailError.textContent = errors.detail;\r\n}\r\n\r\nfunction handleLoginErrors(errors, errorContainer) {\r\n    if (!errors) return;\r\n    \r\n    errorContainer.textContent = errors;\r\n}\r\n\r\nexport function handleSignOutButtonClick(event) {\r\n    localStorage.clear();\r\n    clearAccountContainer();\r\n    hideAccountContainer();\r\n    updateContentUIFromHash();\r\n    loadDisplayMode();\r\n    loadTheme();\r\n}\r\n\r\nexport async function submitNote() {\r\n    console.log('submitNote');\r\n    const hasCheckboxes = dom.checkboxesContainer.childElementCount > 1;\r\n    const hasText = dom.inputNoteCreate.value.trim() !== '';\r\n    const hasTitle = dom.inputTitleCreate.value.trim() !== '';\r\n    const hasImages = dom.imagesContainer.innerHTML !== '';\r\n\r\n    if (!hasCheckboxes && !hasText && !hasTitle && !hasImages) {\r\n        return;\r\n    }\r\n\r\n    let img = await getNoteFile(dom.imagesContainer);\r\n\r\n    let note;\r\n    if (hasCheckboxes) {\r\n        const listItems = getListItems();\r\n        note = createNoteObject('list', listItems, img);\r\n    } else {\r\n        note = createNoteObject('text', [], img);\r\n    }\r\n\r\n    try {\r\n        let token = await getTokenOrRedirect();\r\n        if (!token) return;\r\n\r\n        const data = await createNote(note, token);\r\n        console.log(\"Success, note:\", data);\r\n\r\n        note.id = data.id;\r\n        note.list_items = data.list_items;\r\n        note.image = data.image;\r\n\r\n        addNoteToList(note);\r\n\r\n        updateVisibility();\r\n        updateNotePositions();\r\n    } catch (error) {\r\n        console.error(\"Error:\", error);\r\n    }\r\n\r\n    clearCheckboxesContainer();\r\n    clearContainer(dom.imagesContainer);\r\n    foldNoteInput();\r\n}\r\n\r\nasync function getNoteFile(imagesContainer) {\r\n    const imgElement = imagesContainer.querySelector('img');\r\n    if (!imgElement) return null;\r\n\r\n    if (imgElement.src.startsWith('blob:')) {\r\n        const response = await fetch(imgElement.src);\r\n        const blob = await response.blob();\r\n\r\n        if (!blob || blob.size === 0) {\r\n            console.error(\": blob     \");\r\n            return null;\r\n        }\r\n\r\n        return new File([blob], 'note-image.png', { type: blob.type });\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\nfunction getListItems() {\r\n    return Array.from(dom.checkboxesContainer.querySelectorAll('.checkbox-text'))\r\n        .slice(0, -1)\r\n        .map((item, index) => {\r\n            const checkIcon = item.closest('.checkbox').querySelector('.check-icon');\r\n            const isChecked = checkIcon.classList.contains('fa-square-check');\r\n            return new ListItem(null, item.textContent, index, isChecked);\r\n        });\r\n} \r\n\r\nfunction createNoteObject(type, listItems, img) {\r\n    return new Note(\r\n        null,\r\n        dom.inputTitleCreate.value,\r\n        dom.inputNoteCreate.value,\r\n        type,\r\n        dom.formNoteCreate.getAttribute('data-color'),\r\n        'normal',\r\n        listItems,\r\n        img,\r\n        null\r\n    );\r\n}\r\n\r\nexport async function submitNoteModifications() {\r\n    console.log('submitNoteModifications');\r\n    state.isNoteModificationMode = false;\r\n\r\n    const curTitle = dom.noteEditContainer.querySelector('.title-text-input');\r\n    const curText = dom.noteEditContainer.querySelector('.note-text-input');\r\n    const curBoxNote = dom.noteEditContainer.querySelector('.box-note');\r\n    const curCheckboxesContainer = dom.noteEditContainer.querySelector('.checkboxes-container');\r\n    const curImagesContainer = dom.noteEditContainer.querySelector('.images-container');\r\n\r\n    const originalTitle = state.currentNote.closest('.text-and-title-note');\r\n    const originalBoxNote = state.currentNote.closest('.box-note');\r\n    const originalText = originalTitle.querySelector('.note-text');\r\n    const originalCheckboxesContainer = state.currentNote.querySelector('.checkboxes-container');\r\n    const originalImagesContainer = state.currentNote.querySelector('.images-container');\r\n\r\n    const noteId = state.currentNote.closest('.box-note').getAttribute('data-id');\r\n    const listItems = getListItemsFrom(curCheckboxesContainer);\r\n    const img = await getNoteFile(curImagesContainer);\r\n\r\n    let payload = {\r\n        title: curTitle.textContent,\r\n        content: curText.innerText,\r\n        list_items: listItems,\r\n        image: img\r\n    };\r\n\r\n    try {\r\n        let token = await getTokenOrRedirect();\r\n        if (!token) return;\r\n\r\n        const data = await updateNoteOnServer(noteId, payload, token);\r\n        handleServerResponse(data, listItems, curCheckboxesContainer);\r\n\r\n        updateCheckboxes(curCheckboxesContainer, originalCheckboxesContainer);\r\n        updateImages(curImagesContainer, originalImagesContainer);\r\n\r\n        updateVisibility();\r\n        updateNotePositions();\r\n    } catch (error) {\r\n        console.error('Error:', error);\r\n    }\r\n\r\n    originalBoxNote.style.opacity = '1';\r\n\r\n    updateNoteTitle(curTitle, originalTitle);\r\n    updateNoteText(curText, originalText);\r\n    handleEmptyNote(curText, curTitle, curCheckboxesContainer, curImagesContainer, originalCheckboxesContainer, originalBoxNote);\r\n    updateNoteColor(originalBoxNote, curBoxNote);\r\n    resetNoteState();\r\n}\r\n\r\nfunction getListItemsFrom(container) {\r\n    return Array.from(container.querySelectorAll('.checkbox-text'))\r\n        .slice(0, -1)\r\n        .map((item, index) => {\r\n            const itemId = item.closest('.checkbox').getAttribute('data-listitem-id');\r\n            const isChecked = item.closest('.checkbox').querySelector('.check-icon').classList.contains('fa-square-check');\r\n            return new ListItem(itemId, item.textContent, index, isChecked);\r\n        });\r\n}\r\n\r\nfunction handleServerResponse(data, listItems, container) {\r\n    console.log('Success:', data);\r\n\r\n    data.list_items.forEach((item, index) => {\r\n        if (!listItems[index].id) {\r\n            const checkboxElement = container.querySelector(`.checkbox:nth-child(${index + 1})`);\r\n            checkboxElement.setAttribute('data-listitem-id', item.id);\r\n        }\r\n    });\r\n}\r\n\r\nexport function handlePinSelection() {\r\n    state.selectedNotes.forEach(async note => {\r\n        const pinIcon = note.querySelector('.pin-icon');\r\n        const noteElement = pinIcon.closest('.box-note');\r\n        await pinNote(noteElement, pinIcon);\r\n    });\r\n    updateVisibility();\r\n    updateNotePositions();\r\n    hideSelectMode();\r\n}\r\n\r\nexport function handleBackgroundSelection(event) {\r\n    const choosenColor = getCommonColor(state.selectedNotes) || 'no-select';\r\n    createColorToolbar(event, choosenColor, true);\r\n    event.stopPropagation();\r\n}\r\n\r\nfunction getCommonColor(notes) {\r\n    if (notes.length === 0) return null;\r\n    const firstColor = notes[0].getAttribute('data-color');\r\n    return notes.every(note => note.getAttribute('data-color') === firstColor) ? firstColor : null;\r\n}\r\n\r\nexport function handleArchiveSelection() {\r\n    modifySelectedNotes({ status: 'archived' });\r\n    hideSelectMode();\r\n}\r\n\r\nexport function handleUnarchiveSelection() {\r\n    modifySelectedNotes({ status: 'normal' });\r\n    hideSelectMode();\r\n}\r\n\r\nexport function handleDeleteSelection() {\r\n    modifySelectedNotes({ status: 'deleted' });\r\n    hideSelectMode();\r\n}\r\n\r\nexport async function handleDeleteForeverSelection() {\r\n    let token = await getTokenOrRedirect();\r\n    if (!token) return;\r\n\r\n    state.selectedNotes.forEach(async note => {\r\n        const boxNote = note.closest('.box-note');\r\n        const noteId = boxNote.getAttribute('data-id');\r\n\r\n        try {\r\n            await deleteNoteOnServer(noteId, token);\r\n        } catch(error) {\r\n            console.log('Error: ', error);\r\n        }\r\n\r\n        deleteNoteFromContainer(boxNote);\r\n    });\r\n    hideSelectMode();\r\n}\r\n\r\nexport function handleRestoreSelection() {\r\n    modifySelectedNotes({ status: 'normal' });\r\n    hideSelectMode();\r\n}\r\n\r\nexport async function handleEditAccountClick() {\r\n    try {\r\n        let token = await getTokenOrRedirect();\r\n        if (!token) return;\r\n\r\n        const data = await updateUser(token);\r\n        console.log('data', data);\r\n    } catch(error) {\r\n        console.log('Error: ', error);\r\n    }\r\n}","\r\nimport { getArchivedNotesFromServer, getDeletedNotesFromServer, getDefaultNotesFromServer } from './backend.js';\r\nimport { fillSelectToolbar } from './ui/selection.js';\r\nimport { fillNotesContainer, coverNotesContainer } from './ui/note.js';\r\nimport { getTokenOrCoverContainer } from './ui/auth.js';\r\n\r\nexport const state = {\r\n    selectedCount : 0,\r\n    selectedNotes : [],\r\n    isNoteInputUnfolded : false,\r\n    isMenuOpen : false,\r\n    isSettingMenuOpen : false,\r\n    isNoteModificationMode : false,\r\n    isSettingWindowOpen : false,\r\n    offsetMenuWidth : 80,\r\n    currentNote : null,\r\n    isOneNoteInRow : false,\r\n    isListItemsAddMode: false\r\n};\r\n\r\nexport let dom = {};\r\n\r\nexport function initUI() {\r\n    dom = {\r\n        btnClearSearch : document.getElementById('search-clear'),\r\n        formSearch : document.getElementById('search-form'),\r\n        searchContainer : document.querySelector('.search-input-wrapper'),\r\n        btnClearSelection : document.getElementById('btn-clear-selection'),\r\n        btnMenuToggle : document.getElementById('menu-toggle'),\r\n        sidebarNav : document.querySelector('.sidebar-navigation'),\r\n        sideBar : document.querySelector('.sidebar'),\r\n        inputSearch : document.querySelector('.search-input'),\r\n        btnEnterSearch : document.getElementById('search-enter'),\r\n        btnViewToggle : document.getElementById('btn-view-toggle'),\r\n        btnSettings : document.getElementById('btn-settings'),\r\n        btnLogin : document.getElementById('btn-login'),\r\n        userAccount : document.querySelector('.user-account'),\r\n        textSelection : document.querySelector('.select-text'),\r\n        notesCatalog : document.querySelector('.catalog'),\r\n        pinnedText : document.getElementById('pinned-text'),\r\n        othersText : document.getElementById('others-text'),\r\n        imagesContainer : document.querySelector('.images-container'),\r\n        overlay : document.querySelector('.overlay'),\r\n        noteEditContainer : document.querySelector('.note-edit-container'),\r\n        noteCreate : document.getElementById('create-note'),\r\n        notesContainer : document.getElementById('notes-container'),\r\n        messageNoContent : document.querySelector('.no-content-message'),\r\n        messageTrash : document.querySelector('.trash-message'),\r\n        iconNoContent : document.querySelector('.no-content-icon'),\r\n        textNoContent : document.querySelector('.no-content-text'),\r\n        btnEmptyTrash : document.querySelector('.btn-empty-trash'),\r\n        btnMenuNotes : document.getElementById('btn-notes-menu'),\r\n        btnMenuArchive : document.getElementById('btn-archive-menu'),\r\n        btnMenuTrash : document.getElementById('btn-trash-menu'),\r\n        headerSelection : document.querySelector('.selection-header'),\r\n        inputTitleCreate : document.getElementById('title-input'),\r\n        btnSubmitCreate : document.getElementById('btn-submit'),\r\n        btnBackgroundCreate : document.getElementById('edit-background-color'),\r\n        inputNoteCreate : document.getElementById('note-input'),\r\n        inputGroupCreate : document.getElementById('input-group'),\r\n        btnListCreate : document.getElementById('add-list-icon'),\r\n        btnImageCreate : document.getElementById('add-image-note-icon'),\r\n        actionsNoteCreate : document.getElementById('note-actions'),\r\n        formNoteCreate : document.getElementById('note-form'),\r\n        checkboxesContainer : document.getElementById('note-form').querySelector('.checkboxes-container')\r\n    };\r\n\r\n    loadDisplayMode();\r\n    loadTheme();\r\n    updateContentUIFromHash(); // TODO:  'note', 'list'\r\n}\r\n\r\nexport function createElement(tag, className, textContent = '', attributes = {}) {\r\n    const element = document.createElement(tag);\r\n    element.className = className;\r\n    element.textContent = textContent;\r\n\r\n    Object.entries(attributes).forEach(([key, value]) => {\r\n        element.setAttribute(key, value);\r\n    });\r\n    return element;\r\n}\r\n\r\nexport function createIcon(className, title, eventHandler) {\r\n    const icon = document.createElement('i');\r\n    icon.className = className;\r\n    icon.title = title;\r\n    if (eventHandler) {\r\n        icon.addEventListener('click', eventHandler);\r\n    }\r\n    return icon;\r\n}\r\n\r\nexport function createButton(buttonId, iconClass, title) {\r\n    const button = document.createElement('div');\r\n    button.setAttribute('role', 'button');\r\n    button.className = `btn-selection`;\r\n    button.id = `${buttonId}`;\r\n    button.title = title;\r\n\r\n    const icon = document.createElement('i');\r\n    icon.className = `fa-solid ${iconClass}`;\r\n\r\n    button.appendChild(icon);\r\n    return button;\r\n}\r\n\r\nexport function loadDisplayMode() {\r\n    const mode = localStorage.getItem('displayMode') || 'grid';\r\n    localStorage.setItem('displayMode', mode);\r\n\r\n    if (mode === 'list') {\r\n        dom.btnViewToggle.querySelector('i').className = 'fa-solid fa-table fa-lg';\r\n        dom.btnViewToggle.title = 'Grid view';\r\n    }\r\n}\r\n\r\nexport function loadTheme() {\r\n    const theme = localStorage.getItem('theme') || 'light';\r\n    localStorage.setItem('theme', theme);\r\n\r\n    updateTheme(theme);\r\n}\r\n\r\nfunction updateTheme(theme) {\r\n    const isDarkTheme = theme === 'dark';\r\n    document.body.classList.toggle('dark-theme', isDarkTheme);\r\n}\r\n\r\n//   \r\nexport function unfoldNoteInput() {\r\n    console.log('unfoldNoteInput');\r\n    state.isNoteInputUnfolded = true;\r\n    dom.inputTitleCreate.style.display = 'block';\r\n    dom.btnSubmitCreate.style.display = 'block';\r\n    dom.btnBackgroundCreate.style.display = 'block';\r\n    dom.btnBackgroundCreate.style.fontSize = '15px';\r\n    dom.inputNoteCreate.style.fontSize = '13px';\r\n    dom.inputGroupCreate.style.flexDirection = 'column';\r\n    dom.inputGroupCreate.style.alignItems = 'flex-start';\r\n    dom.btnListCreate.style.fontSize = '15px';\r\n    dom.btnImageCreate.style.fontSize = '15px';\r\n    dom.actionsNoteCreate.style.width = '100%';\r\n    dom.formNoteCreate.classList.add('none');\r\n    dom.formNoteCreate.setAttribute('data-color', 'none');\r\n    dom.formNoteCreate.style.boxShadow = '0 3px 5px rgba(0, 0, 0, 0.3), 0 -0.5px 1px rgba(0, 0, 0, 0.05), 2px 2px 2px rgba(0, 0, 0, 0.1), -2px 2px 2px rgba(0, 0, 0, 0.1)';\r\n}\r\n\r\nexport function foldNoteInput() {\r\n    console.log('foldNoteInput');\r\n    state.isListItemsAddMode = false;\r\n    state.isNoteInputUnfolded = false;\r\n    dom.inputTitleCreate.value = '';\r\n    dom.inputTitleCreate.style.display = 'none';\r\n    dom.inputNoteCreate.value = '';\r\n    dom.inputNoteCreate.removeAttribute('style');\r\n    dom.btnSubmitCreate.style.display = 'none';\r\n    dom.btnBackgroundCreate.style.display = 'none';\r\n    dom.inputGroupCreate.removeAttribute('style');\r\n    dom.btnListCreate.style.fontSize = '20px';\r\n    dom.btnImageCreate.style.fontSize = '20px';\r\n    dom.actionsNoteCreate.removeAttribute('style');\r\n    dom.formNoteCreate.classList.remove(dom.formNoteCreate.getAttribute('data-color'));\r\n    dom.formNoteCreate.removeAttribute('data-color');\r\n    dom.formNoteCreate.style.boxShadow = '0 2px 4px rgba(0, 0, 0, 0.2), 0 1px 2px rgba(0, 0, 0, 0.1), 0 -0.5px 1px rgba(0, 0, 0, 0.05)';\r\n}\r\n\r\n//   \r\nexport function updateContentUI(activeButton, noContentIconClass, noContentTextContent) {\r\n    console.log('updateContentUI: activeButton', activeButton);\r\n\r\n    let buttons = [dom.btnMenuArchive, dom.btnMenuTrash, dom.btnMenuNotes];\r\n    updateButtonState(activeButton, buttons);\r\n    updateNoContentMessage(noContentIconClass, noContentTextContent);\r\n    hideUIElements();\r\n}\r\n\r\nexport async function updateContentUIFromHash() {\r\n    const hashActions = {\r\n        '#archive': async () => {\r\n            updateContentUI(dom.btnMenuArchive, 'fa-solid fa-box', 'Your archived notes appear here');\r\n            \r\n            let token = await getTokenOrCoverContainer();\r\n            if (!token) return;\r\n\r\n            try {\r\n                const data = await getArchivedNotesFromServer(token);\r\n                fillNotesContainer(data); \r\n            } catch (error) {\r\n                console.log('Error: ', error);\r\n                coverNotesContainer();\r\n            }\r\n        },\r\n        '#trash': async () => {\r\n            updateContentUI(dom.btnMenuTrash, 'fa-regular fa-trash-can', 'No notes in Trash');\r\n            dom.messageTrash.style.display = 'flex';\r\n\r\n            let token = await getTokenOrCoverContainer();\r\n            if (!token) return;\r\n\r\n            try {\r\n                const data = await getDeletedNotesFromServer(token);\r\n                fillNotesContainer(data);\r\n            } catch (error) {\r\n                console.log('Error: ', error);\r\n                coverNotesContainer();\r\n            }\r\n        },\r\n        '#home': async () => {\r\n            updateContentUI(dom.btnMenuNotes, 'fa-regular fa-lightbulb', 'Notes you add appear here');\r\n            dom.noteCreate.style.display = 'block';\r\n            dom.notesContainer.appendChild(dom.pinnedText);\r\n            dom.notesContainer.appendChild(dom.othersText);\r\n\r\n            let token = await getTokenOrCoverContainer();\r\n            if (!token) return;\r\n\r\n            try {\r\n                const data = await getDefaultNotesFromServer(token);\r\n                fillNotesContainer(data);\r\n            } catch (error) {\r\n                console.log('Error: ', error);\r\n                coverNotesContainer();\r\n            }\r\n        },\r\n        '#search': () => {\r\n            hideUIElements();\r\n            updateNoContentMessage('', 'No matching results.');\r\n            dom.notesContainer.appendChild(dom.pinnedText);\r\n            dom.notesContainer.appendChild(dom.othersText);\r\n        }\r\n    };\r\n\r\n    const hash = window.location.hash;\r\n    if (hashActions[hash]) {\r\n        hashActions[hash]();\r\n    } else {\r\n        window.location.hash = 'home';\r\n        return;\r\n    }\r\n\r\n    fillSelectToolbar();\r\n}\r\n\r\nfunction updateButtonState(activeButton, buttons) {\r\n    buttons.forEach(button => {\r\n        button.classList.toggle('active', button === activeButton);\r\n        button.classList.toggle('inactive', button !== activeButton);\r\n    });\r\n}\r\n\r\nfunction updateNoContentMessage(iconClass, message) {\r\n    dom.iconNoContent.querySelector('i').className = iconClass;\r\n    dom.textNoContent.textContent = message;\r\n}\r\n\r\nfunction hideUIElements() {\r\n    dom.messageNoContent.style.display = 'none';\r\n    dom.noteCreate.style.display = 'none';\r\n    dom.messageTrash.style.display = 'none';\r\n    dom.btnEmptyTrash.style.display = 'none';\r\n    dom.notesContainer.innerHTML = '';\r\n    dom.notesContainer.style.removeProperty('height');\r\n}","import { createElement, dom } from '../ui.js';\r\n\r\nimport { handleSignOutButtonClick, handleSignUpButtonClick, handleEditAccountClick } from '../handlers.js';\r\n\r\nimport { getAccessToken, getUserInfo } from '../backend.js';\r\n\r\nexport async function createAccountContainer() {\r\n    const accountContainer = createElement('div', 'account-container');\r\n    const btnCloseAccount = createCloseAccountButton();\r\n    const accountContent = createElement('div', 'account-content');\r\n\r\n    let isAuthorized = false;\r\n    let userData = null;\r\n\r\n    try {\r\n        const token = await getAccessToken();\r\n        isAuthorized = token ? true : false;\r\n        userData = isAuthorized ? await getUserInfo(token) : null;\r\n    } catch (error) {\r\n        console.log('Error: ', error);\r\n    }\r\n\r\n    if (userData) {\r\n        accountContent.appendChild(createEmailContainer(userData.email));\r\n    }\r\n\r\n    const accountInfo = createAccountInfo(isAuthorized, userData);\r\n    const accountManage = createAccountManageSection(isAuthorized);\r\n\r\n    const account = createElement('div', 'account');\r\n    account.appendChild(accountInfo);\r\n    account.appendChild(accountManage);\r\n\r\n    accountContent.appendChild(account);\r\n\r\n    accountContainer.appendChild(btnCloseAccount);\r\n    accountContainer.appendChild(accountContent);\r\n    dom.userAccount.appendChild(accountContainer);\r\n}\r\n \r\nfunction createCloseAccountButton() {\r\n    const btnCloseAccount = createElement('button', 'btn-close-account');\r\n    btnCloseAccount.role = 'button';\r\n    btnCloseAccount.addEventListener('click', hideAccountContainer);\r\n\r\n    const closeIcon = createElement('i', 'fa-solid fa-xmark fa-xl');\r\n    btnCloseAccount.appendChild(closeIcon);\r\n\r\n    return btnCloseAccount;\r\n}\r\n\r\nfunction createEmailContainer(email) {\r\n    const emailContainer = createElement('div', 'email-container');\r\n    const emailText = createElement('div', 'email-text', email);\r\n    emailContainer.appendChild(emailText);\r\n\r\n    return emailContainer;\r\n}\r\n\r\nfunction createAccountInfo(isAuthorized, userData) {\r\n    const accountImageIcon = createElement('i', 'fa-solid fa-circle-user');\r\n    const accountImage = createElement('div', 'account-image');\r\n    accountImage.appendChild(accountImageIcon);\r\n\r\n    const accountNickname = createElement('div', 'account-nickname', getGreetingText(userData));\r\n    \r\n    const accountInfo = createElement('div', 'account-info');\r\n    accountInfo.appendChild(accountImage);\r\n    accountInfo.appendChild(accountNickname);\r\n\r\n    if (!isAuthorized) {\r\n        const accountDescription = createElement('div', 'account-description', 'Please sign in or create an account to save your notes.');\r\n        accountInfo.appendChild(accountDescription);\r\n    }\r\n\r\n    return accountInfo;\r\n}\r\n\r\nfunction getGreetingText(userData) {\r\n    if (userData) {\r\n        let userName = userData.first_name;\r\n\r\n        if (userData.last_name !== '') {\r\n            userName += ` ${userData.last_name}!`;\r\n        } else {\r\n            userName += '!';\r\n        }\r\n\r\n        return `Hi, ${userName}`;\r\n    } else {\r\n        return 'Welcome!';\r\n    }\r\n}\r\n\r\nfunction createAccountManageSection(isAuthorized) {\r\n    const accountManage = createElement('div', 'account-manage');\r\n\r\n    if (isAuthorized) {\r\n        const editAccountButton = createEditAccountButton();\r\n        const signOutButton = createSignOutButton();\r\n        accountManage.appendChild(editAccountButton);\r\n        accountManage.appendChild(signOutButton);\r\n    } else {\r\n        const signUpButton = createSignUpButton();\r\n\r\n        accountManage.style.display = 'flex';\r\n        accountManage.style.justifyContent = 'center';\r\n        accountManage.style.marginTop = '25px';\r\n\r\n        accountManage.appendChild(signUpButton);\r\n    }\r\n\r\n    return accountManage;\r\n}\r\n\r\nfunction createEditAccountButton() {\r\n    const editAccountButton = createElement('div', 'btn-edit-account', 'Manage your account');\r\n    editAccountButton.role = 'button';\r\n    editAccountButton.addEventListener('click', handleEditAccountClick);\r\n    return editAccountButton;\r\n}\r\n\r\nfunction createSignOutButton() {\r\n    const signOutIcon = createElement('i', 'fa-solid fa-arrow-right-from-bracket');\r\n    const signOutIconContainer = createElement('div', 'signout-icon');\r\n    signOutIconContainer.appendChild(signOutIcon);\r\n\r\n    const signOutText = createElement('div', 'signout-text', 'Sign Out');\r\n    const signOutButton = createElement('div', 'btn-signout');\r\n    signOutButton.role = 'button';\r\n    signOutButton.addEventListener('click', handleSignOutButtonClick);\r\n\r\n    signOutButton.appendChild(signOutIconContainer);\r\n    signOutButton.appendChild(signOutText);\r\n\r\n    return signOutButton;\r\n}\r\n\r\nfunction createSignUpButton() {\r\n    const signUpButton = createElement('div', 'btn-signup', 'Sign Up / Sign In');\r\n    signUpButton.role = 'button';\r\n    signUpButton.addEventListener('click', handleSignUpButtonClick);\r\n\r\n    return signUpButton;\r\n}\r\n\r\nexport function clearAccountContainer() {\r\n    dom.userAccount.innerHTML = '';\r\n}\r\n\r\nexport function hideAccountContainer() {\r\n    dom.userAccount.style.visibility = 'hidden';\r\n    dom.userAccount.style.height = '0px';\r\n    dom.userAccount.style.removeProperty('min-height');\r\n}\r\n\r\nexport function showAccountContainer() {\r\n    dom.userAccount.style.visibility = 'visible';\r\n    dom.userAccount.style.height = '365px';\r\n    dom.userAccount.style.minHeight = '210px';\r\n}","import { dom, createElement } from '../ui.js';\r\n\r\nimport { handleEmailCheckClick } from '../handlers.js';\r\n\r\nimport { getAccessToken } from '../backend.js';\r\n\r\nfunction suggestToSignUp() {\r\n    dom.overlay.style.display = 'block';\r\n    document.body.style.overflowY = 'hidden';\r\n\r\n    const signUpWindow = createSignUpWindow();\r\n    document.body.appendChild(signUpWindow);\r\n}\r\n \r\nexport function createSignUpWindow() {\r\n    const signUpWindow = createElement('div', 'signup-window window');\r\n    signUpWindow.style.width = '480px';\r\n\r\n    const signUpHeader = createElement('h2', 'window-header', 'Sign Up / Sign In');\r\n    const signUpContainer = createElement('div', 'signup-container');\r\n    signUpContainer.style.marginTop = '12px';\r\n\r\n    const signUpForm = createSignUpForm();\r\n    const thirdPartyAuth = createThirdPartyAuthSection();\r\n\r\n    signUpContainer.appendChild(signUpForm);\r\n    signUpContainer.appendChild(thirdPartyAuth);\r\n\r\n    signUpWindow.appendChild(signUpHeader);\r\n    signUpWindow.appendChild(signUpContainer);\r\n\r\n    return signUpWindow;\r\n}\r\n\r\nfunction createSignUpForm() {\r\n    const signUpForm = createElement('form', 'signup-form');\r\n    const signUpInputContainer = createSignUpInputContainer();\r\n    const signUpSubmitButtonContainer = createSignUpSubmitButtonContainer();\r\n\r\n    signUpForm.appendChild(signUpInputContainer);\r\n    signUpForm.appendChild(signUpSubmitButtonContainer);\r\n\r\n    return signUpForm;\r\n}\r\n\r\nfunction createSignUpInputContainer() {\r\n    const signUpInputContainer = createElement('div', 'signup-input-container');\r\n    const emailContainer = createInputContainer('email-input', 'Email', 'email-error');\r\n    signUpInputContainer.appendChild(emailContainer);\r\n\r\n    return signUpInputContainer;\r\n}\r\n\r\nfunction createSignUpSubmitButtonContainer() {\r\n    const signUpSubmitButtonContainer = createElement('div', 'signup-submit-button-container');\r\n    const signUpSubmitButton = createElement('button', 'signup-submit-button', 'Next');\r\n    \r\n    signUpSubmitButton.addEventListener('click', handleEmailCheckClick);\r\n    signUpSubmitButtonContainer.appendChild(signUpSubmitButton);\r\n\r\n    return signUpSubmitButtonContainer;\r\n}\r\n\r\nfunction createThirdPartyAuthSection() {\r\n    const thirdPartyAuth = createElement('aside', 'third-party-auth');\r\n    const separator = createElement('div', 'separator', 'or');\r\n    const googleLoginButton = createGoogleLoginButton();\r\n\r\n    thirdPartyAuth.appendChild(separator);\r\n    thirdPartyAuth.appendChild(googleLoginButton);\r\n\r\n    return thirdPartyAuth;\r\n}\r\n\r\nfunction createGoogleLoginButton() {\r\n    const googleLoginButton = createElement('button', 'google-login-button');\r\n    googleLoginButton.addEventListener('click', (event) => {\r\n        event.preventDefault();\r\n        // TODO: oauth2\r\n    });\r\n\r\n    const googleIcon = createElement('span', 'google-icon');\r\n    googleLoginButton.appendChild(googleIcon);\r\n    googleLoginButton.appendChild(document.createTextNode('Continue with Google'));\r\n\r\n    return googleLoginButton;\r\n}\r\n\r\nexport function showRegistrationForm(signUpInputContainer) {\r\n    const fields = [\r\n        { className: 'password-input', placeholder: 'Password', errorClass: 'password-error' },\r\n        { className: 'confirm-input', placeholder: 'Confirm password', errorClass: 'confirm-error' },\r\n        { className: 'first-name-input', placeholder: 'First name', errorClass: 'first-name-error' },\r\n        { className: 'last-name-input', placeholder: 'Last name (optional)', errorClass: 'last-name-error' },\r\n    ];\r\n\r\n    fields.forEach(field => {\r\n        const inputContainer = createInputContainer(field.className, field.placeholder, field.errorClass);\r\n        signUpInputContainer.appendChild(inputContainer);\r\n    });\r\n}\r\n\r\nexport function showLoginForm(signUpInputContainer) {\r\n    const passwordContainer = createInputContainer('password-input', 'Password', 'password-error');\r\n    signUpInputContainer.appendChild(passwordContainer);\r\n}\r\n\r\nfunction createInputContainer(inputClass, placeholder, errorClass) {\r\n    const container = createElement('div', 'input-container');\r\n    const input = createElement('input', `${inputClass} signup-input`);\r\n    input.placeholder = placeholder;\r\n\r\n    const error = createElement('div', `${errorClass} error-message`);\r\n\r\n    container.appendChild(error);\r\n    container.appendChild(input);\r\n\r\n    return container;\r\n}\r\n\r\nexport async function getTokenOrRedirect() {\r\n    try {\r\n        let token = await getAccessToken();\r\n        if (!token) {\r\n            suggestToSignUp();\r\n            return null;\r\n        }\r\n        return token;\r\n    } catch (error) {\r\n        console.log('Error: ', error);\r\n    }\r\n}\r\n\r\nexport async function getTokenOrCoverContainer() {\r\n    try {\r\n        let token = await getAccessToken();\r\n        if (!token) {\r\n            dom.notesContainer.innerHTML = '';\r\n            dom.notesContainer.style.removeProperty('height');\r\n            dom.messageNoContent.style.display = 'flex';\r\n            return null;\r\n        }\r\n        return token;\r\n    } catch (error) {\r\n        console.log('Error: ', error);\r\n    }\r\n}","import { createElement, dom } from '../ui.js';\r\n\r\nimport { handleCheckboxIconClick, handleEmptyCheckboxInput, handleEmptyCheckboxKeydown,\r\n    handleCheckboxKeydown, handleCheckboxBackspace, handleCheckboxDeleteClick } from '../handlers.js';\r\n\r\nexport function createCheckbox(isEmpty, isChecked = false, text = '', id = null) {\r\n    const oneCheckbox = createElement('div', 'checkbox');\r\n\r\n    if (id) {\r\n        oneCheckbox.setAttribute('data-listitem-id', id);\r\n    }\r\n\r\n    if (isEmpty) {\r\n        oneCheckbox.classList.add('empty-checkbox');\r\n    }\r\n\r\n    const checkboxIconContainer = createCheckboxIconContainer(isEmpty, isChecked);\r\n    const checkboxInput = createCheckboxInput(isEmpty, isChecked, text);\r\n\r\n    oneCheckbox.appendChild(checkboxIconContainer);\r\n    oneCheckbox.appendChild(checkboxInput);\r\n\r\n    return oneCheckbox;\r\n}\r\n \r\nfunction createCheckboxIconContainer(isEmpty, isChecked = false) {\r\n    const checkboxIconContainer = createElement('div', 'checkbox-icon');\r\n    const checkboxIcon = createCheckboxIcon(isEmpty, isChecked);\r\n\r\n    if (!isEmpty && window.location.hash !== '#trash') {\r\n        checkboxIconContainer.addEventListener('click', handleCheckboxIconClick);\r\n    }\r\n    else if (!isEmpty) {\r\n        checkboxIcon.style.color = 'var(--header-button-icon)';\r\n        checkboxIcon.style.cursor = 'not-allowed';\r\n    }\r\n\r\n    checkboxIconContainer.appendChild(checkboxIcon);\r\n    return checkboxIconContainer;\r\n}\r\n\r\nfunction createCheckboxIcon(isEmpty, isChecked) {\r\n    const checkboxIcon = document.createElement('i');\r\n    \r\n    if (isEmpty) {\r\n        checkboxIcon.className = 'fa-solid fa-plus new-checkbox-icon';\r\n    } else {\r\n        checkboxIcon.className = isChecked \r\n            ? 'fa-regular fa-square-check check-icon' \r\n            : 'fa-regular fa-square check-icon';\r\n    }\r\n\r\n    return checkboxIcon;\r\n}\r\n\r\nfunction createCheckboxInput(isEmpty, isChecked = false, text = '') {\r\n    const checkboxInput = createElement('div', 'checkbox-input');\r\n\r\n    const checkboxPlaceholder = createCheckboxPlaceholder(isEmpty);\r\n    const checkboxText = createCheckboxText(isEmpty, isChecked, text);\r\n\r\n    checkboxInput.appendChild(checkboxPlaceholder);\r\n    checkboxInput.appendChild(checkboxText);\r\n\r\n    if (!isEmpty) {\r\n        const checkboxDeleteButton = createCheckboxDeleteButton();\r\n        checkboxInput.appendChild(checkboxDeleteButton);\r\n    }\r\n\r\n    return checkboxInput;\r\n}\r\n\r\nfunction createCheckboxPlaceholder(isEmpty) {\r\n    const checkboxPlaceholder = createElement('div', 'checkbox-text-empty', 'List item');\r\n    if (isEmpty) {\r\n        checkboxPlaceholder.style.display = 'block';\r\n    }\r\n\r\n    return checkboxPlaceholder;\r\n}\r\n\r\nfunction createCheckboxText(isDefault, isChecked, text) {\r\n    const checkboxText = createElement('div', 'checkbox-text');\r\n    checkboxText.contentEditable = 'true';\r\n    checkboxText.tabIndex = '0';\r\n    checkboxText.spellcheck = 'true';\r\n    checkboxText.textContent = text;\r\n\r\n    if (isDefault) {\r\n        checkboxText.addEventListener('input', handleEmptyCheckboxInput);\r\n        checkboxText.addEventListener('keydown', handleEmptyCheckboxKeydown);\r\n    } else {\r\n        // TODO:   ,    ,   \r\n        // checkboxText.addEventListener('focus', handleCheckboxFocus);\r\n        // checkboxText.addEventListener('blur', handleCheckboxBlur);\r\n        checkboxText.addEventListener('keydown', handleCheckboxKeydown);\r\n        checkboxText.addEventListener('keydown', handleCheckboxBackspace);\r\n    }\r\n\r\n    if (isChecked) {\r\n        checkboxText.style.textDecoration = 'line-through';\r\n        checkboxText.style.opacity = '0.7';\r\n    }\r\n\r\n    return checkboxText;\r\n}\r\n\r\nfunction createCheckboxDeleteButton() {\r\n    const checkboxDeleteButton = createElement('div', 'checkbox-delete-button');\r\n    checkboxDeleteButton.role = 'button';\r\n    checkboxDeleteButton.tabIndex = '0';\r\n    checkboxDeleteButton.title = 'Delete';\r\n\r\n    const checkboxDeleteIcon = createElement('i', 'fa-solid fa-xmark');\r\n    checkboxDeleteButton.appendChild(checkboxDeleteIcon);\r\n\r\n    checkboxDeleteButton.addEventListener('click', handleCheckboxDeleteClick);\r\n\r\n    return checkboxDeleteButton;\r\n}\r\n\r\nexport function insertNewCheckbox(originalCheckbox, newCheckbox) {\r\n    const parent = originalCheckbox.parentNode;\r\n    const currentHeight = parseFloat(parent.style.height) || 32;\r\n\r\n    parent.insertBefore(newCheckbox, originalCheckbox);\r\n    parent.style.height = `${currentHeight + 32}px`;\r\n}\r\n\r\nexport function focusOnNewCheckbox(newCheckbox) {\r\n    const newCheckboxText = newCheckbox.querySelector('.checkbox-text');\r\n    newCheckboxText.focus();\r\n\r\n    const range = document.createRange();\r\n    const selection = window.getSelection();\r\n    range.selectNodeContents(newCheckboxText);\r\n    range.collapse(false);\r\n    selection.removeAllRanges();\r\n    selection.addRange(range);\r\n}\r\n\r\nexport function splitTextAtCursor(checkboxText, cursorPosition) {\r\n    const remainingText = checkboxText.textContent.slice(cursorPosition);\r\n    checkboxText.textContent = checkboxText.textContent.slice(0, cursorPosition);\r\n    return remainingText;\r\n}\r\n\r\nfunction adjustCheckboxPosition(newCheckbox, referenceCheckbox, offset) {\r\n    const currentTransform = referenceCheckbox.style.transform;\r\n    const currentY = parseFloat(currentTransform.match(/translateY\\((-?\\d+)px\\)/)?.[1] || 0);\r\n    newCheckbox.style.transform = `translateY(${currentY + offset}px)`;\r\n}\r\n\r\nexport function createAndInsertNewCheckbox(oneCheckbox, remainingText) {\r\n    const newCheckbox = createCheckbox(false);\r\n    adjustCheckboxPosition(newCheckbox, oneCheckbox, 32);\r\n\r\n    const parent = oneCheckbox.parentNode;\r\n    const currentHeight = parseFloat(parent.style.height) || 32;\r\n\r\n    parent.insertBefore(newCheckbox, oneCheckbox.nextElementSibling);\r\n    parent.style.height = `${currentHeight + 32}px`;\r\n\r\n    newCheckbox.querySelector('.checkbox-text').textContent = remainingText;\r\n    return newCheckbox;\r\n}\r\n\r\nexport function clearCheckboxesContainer() {\r\n    dom.checkboxesContainer.innerHTML = '';\r\n    dom.checkboxesContainer.removeAttribute('style');\r\n    dom.inputNoteCreate.style.removeProperty('display');\r\n}\r\n\r\nfunction shiftAllCheckboxes(startingCheckbox, distance, direction) {\r\n    let checkbox = startingCheckbox;\r\n    const directionMultiplier = direction === 'down' ? 1 : -1;\r\n\r\n    while (checkbox) {\r\n        if (checkbox.classList.contains('checkbox')) {\r\n            const currentTransform = checkbox.style.transform;\r\n            const match = currentTransform.match(/translateY\\((-?\\d+)px\\)/);\r\n            let currentY = 0;\r\n\r\n            if (match) {\r\n                currentY = parseFloat(match[1]);\r\n            }\r\n\r\n            checkbox.style.transform = `translateY(${currentY + (distance * directionMultiplier)}px)`;\r\n        }\r\n        checkbox = checkbox.nextElementSibling;\r\n    }\r\n}\r\n\r\nexport function shiftAllCheckboxesDown(startingCheckbox, distance = 32) {\r\n    shiftAllCheckboxes(startingCheckbox, distance, 'down');\r\n}\r\n\r\nexport function shiftAllCheckboxesUp(startingCheckbox, distance = 32) {\r\n    shiftAllCheckboxes(startingCheckbox, distance, 'up');\r\n}\r\n\r\nexport function positionAllCheckboxes(startingCheckbox, distance = 32) {\r\n    let checkbox = startingCheckbox;\r\n    let index = 0;\r\n\r\n    while (checkbox) {\r\n        if (checkbox.classList.contains('checkbox')) {\r\n            const currentShift = distance * index;\r\n            checkbox.style.transform = `translateY(${currentShift}px)`;\r\n            index++;\r\n        }\r\n        checkbox = checkbox.nextElementSibling;\r\n    }\r\n}","import { createElement } from '../ui.js';\r\n\r\nimport { handleColorOptionClick } from '../handlers.js';\r\n\r\nimport { updateNoteOnServer } from '../backend.js';\r\n\r\nimport { getTokenOrRedirect } from './auth.js';\r\n\r\nimport { positionElement } from './position.js';\r\n\r\nconst colors = ['none', 'coral', 'peach', 'sand', 'sage', 'fog', 'storm', 'dusk'];\r\n\r\nexport function createColorToolbar(event, chosenColor = 'no-select', isMultiSelect = false) {\r\n    console.log('createColorToolbar', chosenColor);\r\n\r\n    const colorToolbar = document.querySelector('.change-background');\r\n    if (colorToolbar) colorToolbar.remove();\r\n\r\n    const newColorToolbar = createElement('div', 'change-background', '', { 'tabindex': '0' });\r\n\r\n    const notes = isMultiSelect ? null : event.target.closest('.box-note, #note-form');\r\n    const colorOptions = createOptionsContainer(chosenColor, notes);\r\n\r\n    newColorToolbar.appendChild(colorOptions);\r\n    document.body.appendChild(newColorToolbar);\r\n    positionElement(newColorToolbar, event.target);\r\n\r\n    event.stopPropagation();\r\n}\r\n\r\nfunction createOptionsContainer(chosenColor, notes) {\r\n    const colorOptionsContainer = createElement('div', 'change-background-color', '', { tabindex: '0', role: 'listbox' });\r\n\r\n\r\n    colors.forEach(color => {\r\n        const option = createColorOption(color, chosenColor);\r\n        option.addEventListener('click', (event) => handleColorOptionClick(event, notes));\r\n        colorOptionsContainer.appendChild(option);\r\n    });\r\n\r\n    return colorOptionsContainer;\r\n}\r\n\r\nfunction createColorOption(color, choosenColor) {\r\n    const colorOption = createElement('div', `color-option ${color}`, '', { 'role': 'option' });\r\n\r\n    const selectColorIcon = createElement('i', 'fa-solid fa-circle-check select-color-icon');\r\n    const noColorIcon = createElement('i', 'fa-solid fa-droplet-slash no-color-icon');\r\n    if (color === 'none') {\r\n        colorOption.appendChild(noColorIcon);\r\n    }\r\n    selectColorIcon.style.display = 'none';\r\n    colorOption.appendChild(selectColorIcon);\r\n\r\n    if (choosenColor === color) {\r\n        colorOption.classList.add('chosen');\r\n        colorOption.querySelector('.select-color-icon').style.display = 'inline-block';\r\n    }\r\n\r\n    return colorOption;\r\n}\r\n\r\nexport async function applyColorToNotes(notes, chosenColor) {\r\n    notes.forEach(async note => {\r\n        colors.forEach(c => note.classList.remove(c));\r\n        note.classList.add(chosenColor);\r\n        note.setAttribute('data-color', chosenColor);\r\n\r\n        const noteId = note.getAttribute('data-id');\r\n        if (noteId) {\r\n            const payload = {\r\n                \"color\": chosenColor\r\n            };\r\n\r\n            let token = await getTokenOrRedirect();\r\n            if (!token) return;\r\n\r\n            try {\r\n                updateNoteOnServer(noteId, payload, token);\r\n            } catch(error) {\r\n                console.log('Error: ', error);\r\n            }\r\n        }\r\n    });\r\n}","import { createElement, dom, state } from '../ui.js';\r\n\r\nimport { handleOneNoteColorClick, handleTextEditInput, handleTitleEditInput, handleTitleEditKeydown,\r\n    handleCheckboxIconClick, handleEditorCheckboxClick, handleCheckboxDeleteClick, handleCheckboxBackspace, handleEmptyCheckboxInput,\r\n    handleEmptyCheckboxKeydown, handleCheckboxFocus, handleCheckboxBlur, handleCheckboxKeydown,\r\n    handleNoteEditClick } from '../handlers.js';\r\n\r\nimport { moveToTrashNote, archiveNote, deleteNoteOnServer, restoreNote, updateNoteOnServer, deleteImage} from '../backend.js';\r\n\r\nimport { getTokenOrRedirect } from './auth.js';\r\n\r\nimport { deleteNoteFromContainer } from './note.js';\r\n\r\nimport { clearContainer, initImageFileInput } from './image.js';\r\n\r\nexport function setupNoteEditElements(note, editorNote) {\r\n    console.log('setupNoteEditElements');\r\n\r\n    const emptyNote = editorNote.querySelector('.empty-note');\r\n    if (emptyNote) {\r\n        emptyNote.style.display = 'none';\r\n    }\r\n\r\n    const imageIcon = editorNote.querySelector('.fa-image');\r\n    if (imageIcon) {\r\n        imageIcon.addEventListener('click', () => {\r\n            // TODO:     \r\n            initImageFileInput(editorNote.querySelector('.images-container'));\r\n        });\r\n    }\r\n\r\n    const paletteIcon = editorNote.querySelector('.fa-palette');\r\n    if (paletteIcon) {\r\n        // TODO:      \r\n        paletteIcon.addEventListener('click', handleOneNoteColorClick);\r\n    }\r\n\r\n    const moveToTrashButton = editorNote.querySelector('.delete-button');\r\n    if (moveToTrashButton) {\r\n        moveToTrashButton.addEventListener('click', async () => {\r\n            let token = await getTokenOrRedirect();\r\n            if (!token) return;\r\n\r\n            const noteId = note.getAttribute('data-id');\r\n\r\n            try {\r\n                moveToTrashNote(noteId, token);\r\n            } catch(error) {\r\n                console.log('Error: ', error);\r\n            }\r\n\r\n            deleteNoteFromContainer(note);\r\n            closeEditor();\r\n        });\r\n    }\r\n\r\n    const pinIcon = editorNote.querySelector('.pin-icon');\r\n    if (pinIcon) {\r\n        pinIcon.addEventListener('click', async () => {\r\n            togglePinIcon(pinIcon);\r\n            const originalPinIcon = note.querySelector('.pin-icon');\r\n\r\n            await pinNote(note, originalPinIcon);\r\n        });\r\n    }\r\n\r\n    const archiveIcon = editorNote.querySelector('.fa-box') || editorNote.querySelector('.fa-box-open');\r\n    if (archiveIcon) {\r\n        archiveIcon.addEventListener('click', async () => {\r\n\r\n            let token = await getTokenOrRedirect();\r\n            if (!token) return;\r\n\r\n            const noteId = note.getAttribute('data-id');\r\n            const isArchived = archiveIcon.title === 'Archive' ? true : false;\r\n\r\n            try {\r\n                await archiveNote(noteId, isArchived, token);\r\n            } catch(error) {\r\n                console.log('Error: ', error);\r\n            }\r\n\r\n            deleteNoteFromContainer(note);\r\n            closeEditor();\r\n        });\r\n    }\r\n\r\n    const deleteForeverIcon = editorNote.querySelector('.fa-trash:not(.img-delete)');\r\n    if (deleteForeverIcon) {\r\n        deleteForeverIcon.addEventListener('click', async () => {\r\n            let token = await getTokenOrRedirect();\r\n            if (!token) return;\r\n\r\n            const noteId = note.getAttribute('data-id');\r\n\r\n            try {\r\n                await deleteNoteOnServer(noteId, token);\r\n            } catch(error) {\r\n                console.log('Error: ', error);\r\n            }\r\n\r\n            deleteNoteFromContainer(note);\r\n            closeEditor();\r\n        });\r\n    }\r\n\r\n    const restoreIcon = editorNote.querySelector('.fa-trash-arrow-up');\r\n    if (restoreIcon) {\r\n        restoreIcon.addEventListener('click', async () => {\r\n\r\n            let token = await getTokenOrRedirect();\r\n            if (!token) return;\r\n        \r\n            const noteId = note.getAttribute('data-id');\r\n\r\n            try {\r\n                restoreNote(noteId, token);\r\n            } catch(error) {\r\n                console.log('Error: ', error);\r\n            }\r\n\r\n            deleteNoteFromContainer(note);\r\n            closeEditor();\r\n        });\r\n    }\r\n\r\n    setupEditTitle(editorNote);\r\n    setupEditCheckboxes(editorNote);\r\n    setupEditImages(note, editorNote);\r\n    setupEditText(editorNote);\r\n}\r\n\r\nexport async function pinNote(note, pinIcon) {\r\n    let token = await getTokenOrRedirect();\r\n    if (!token) return;\r\n\r\n    togglePinIcon(pinIcon);\r\n\r\n    const noteId = note.getAttribute('data-id');\r\n    const payload = {\r\n        status: pinIcon.title === 'Unpin note' ? 'pinned' : 'normal'\r\n    };\r\n\r\n    try {\r\n        updateNoteOnServer(noteId, payload, token);\r\n    } catch(error) {\r\n        console.log('Error: ', error);\r\n    }\r\n\r\n    dom.notesContainer.insertBefore(note, dom.notesContainer.firstChild);\r\n}\r\n\r\nfunction setupEditText(editorNote) {\r\n    console.log('setupTextEditing');\r\n\r\n    const editorNoteText = editorNote.querySelector('.note-text');\r\n    const checkboxesContainer = editorNote.querySelector('.checkboxes-container');\r\n    toggleNoteDisplay(editorNoteText, checkboxesContainer);\r\n\r\n    const textPlaceholder = createElement('div', 'text-placeholder', 'Note');\r\n    const textEditable = createEditableElement('note-text-input', handleTextEditInput);\r\n    setupTextContent(editorNoteText, textPlaceholder, textEditable);\r\n\r\n    editorNoteText.appendChild(textPlaceholder);\r\n    editorNoteText.appendChild(textEditable);\r\n}\r\n\r\nfunction setupEditTitle(editorNote) {\r\n    console.log('setupTitleEditing');\r\n\r\n    const editorNoteTitle = editorNote.querySelector('.note-title-text');\r\n    toggleTitleDisplay(editorNoteTitle);\r\n    \r\n    const titlePlaceholder = createElement('div', 'title-placeholder', 'Title');\r\n    const titleEditable = createEditableElement('title-text-input', handleTitleEditInput);\r\n    titleEditable.addEventListener('keydown', handleTitleEditKeydown);\r\n    setupTextContent(editorNoteTitle, titlePlaceholder, titleEditable);\r\n\r\n    editorNoteTitle.appendChild(titlePlaceholder);\r\n    editorNoteTitle.appendChild(titleEditable);\r\n}\r\n\r\nfunction toggleNoteDisplay(text, container) {\r\n    if ((container.innerHTML !== '' && container.childElementCount > 1) || \r\n     (text.textContent.trim() === '' && window.location.hash === '#trash')) \r\n    {\r\n        text.style.display = 'none';\r\n    } else {\r\n        text.style.display = 'block';\r\n    }\r\n}\r\n\r\nfunction toggleTitleDisplay(title) {\r\n    if (title.textContent.trim() === '' && window.location.hash === '#trash') {\r\n        title.style.display = 'none';\r\n    } else {\r\n        title.style.display = 'block';\r\n    }\r\n}\r\n\r\nfunction createEditableElement(className, inputHandler) {\r\n    const editableElement = createElement('div', className);\r\n    editableElement.style.display = 'block';\r\n    editableElement.contentEditable = window.location.hash === '#trash' ? 'false' : 'true';\r\n    editableElement.role = 'textbox';\r\n    editableElement.tabIndex = '0';\r\n    editableElement.spellcheck = 'true';\r\n    editableElement.addEventListener('input', inputHandler);\r\n    return editableElement;\r\n}\r\n\r\nfunction setupTextContent(text, placeholder, editableElement) {\r\n    if (text.textContent.trim() === '') {\r\n        placeholder.style.display = 'block';\r\n    } else {\r\n        placeholder.style.display = 'none';\r\n        editableElement.innerHTML = text.innerHTML;\r\n        text.textContent = '';\r\n    }\r\n}\r\n\r\nfunction setupEditImages(note, editorNote) {\r\n    console.log('setupEditImages');\r\n\r\n    const container = editorNote.querySelector('.images-container');\r\n    if (container.innerHTML !== '') {\r\n        const imgDeleteButton = container.querySelector('.img-delete-button');\r\n\r\n        imgDeleteButton.style.removeProperty('display');\r\n        imgDeleteButton.addEventListener('click', async () => {\r\n            clearContainer(container);\r\n\r\n            let token = await getTokenOrRedirect();\r\n            if (!token) return;\r\n\r\n            const noteId = note.getAttribute('data-id');\r\n\r\n            try {\r\n                deleteImage(noteId, token);\r\n            } catch(error) {\r\n                console.log('Error: ', error);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction setupEditCheckboxes(editorNote) {\r\n    console.log('setupEditCheckboxes');\r\n\r\n    const checkboxesContainer = editorNote.querySelector('.checkboxes-container');\r\n    if (checkboxesContainer.innerHTML !== '' && checkboxesContainer.childElementCount > 1) {\r\n        if (window.location.hash !== '#trash') {\r\n\r\n            // TODO:  ( )\r\n            const currentHeight = parseFloat(checkboxesContainer.style.height) || 32;\r\n            checkboxesContainer.style.height = `${currentHeight + 32}px`;\r\n            checkboxesContainer.style.removeProperty('padding-top');\r\n\r\n            const emptyCheckbox = checkboxesContainer.querySelector('.empty-checkbox');\r\n            emptyCheckbox.style.removeProperty('display');\r\n            \r\n            checkboxesContainer.querySelectorAll('.checkbox-icon .check-icon').forEach(icon => {\r\n                icon.addEventListener('click', handleEditorCheckboxClick);\r\n            });\r\n            \r\n            checkboxesContainer.querySelectorAll('.checkbox-delete-button').forEach(button => {\r\n                button.style.removeProperty('display');\r\n                button.addEventListener('click', handleCheckboxDeleteClick);\r\n            });\r\n\r\n            checkboxesContainer.querySelectorAll('.checkbox-text').forEach(text => {\r\n                text.addEventListener('keydown', handleCheckboxBackspace);\r\n                text.contentEditable = 'true';\r\n                text.style.removeProperty('cursor');\r\n            });\r\n\r\n            emptyCheckbox.addEventListener('input', handleEmptyCheckboxInput);\r\n            emptyCheckbox.addEventListener('keydown', handleEmptyCheckboxKeydown);\r\n        }\r\n        \r\n        checkboxesContainer.querySelectorAll('.checkbox:not(.empty-checkbox)').forEach(checkbox => {\r\n            const checkboxText = checkbox.querySelector('.checkbox-text');\r\n            checkboxText.addEventListener('focus', handleCheckboxFocus);\r\n            checkboxText.addEventListener('blur', handleCheckboxBlur);\r\n            checkboxText.addEventListener('keydown', handleCheckboxKeydown);\r\n        });\r\n    }\r\n}\r\n\r\nexport function updateNoteEditIcons(editorNote) {\r\n    const pinIcon = editorNote.querySelector('.pin-icon');\r\n    if (pinIcon) {\r\n        pinIcon.classList.add('edit');\r\n    }\r\n    editorNote.querySelector('.note-title-text').classList.add('edit');\r\n    editorNote.querySelector('.note-text').classList.add('edit');\r\n    editorNote.querySelector('.note-toolbar').classList.add('edit');\r\n    editorNote.querySelector('.select-note-icon').style.display = 'none';\r\n}\r\n\r\nexport function updateNoteColor(note, editorNote) {\r\n    note.classList.remove(note.getAttribute('data-color'));\r\n    note.classList.add(editorNote.getAttribute('data-color'));\r\n    note.setAttribute('data-color', editorNote.getAttribute('data-color'));\r\n}\r\n\r\nexport function updateNoteTitle(title, note) {\r\n    const noteTitle = note.querySelector('.note-title-text');\r\n    if (title.textContent !== '') {\r\n        noteTitle.style.display = 'block';\r\n        noteTitle.textContent = title.textContent;\r\n    } else {\r\n        noteTitle.style.display = 'none';\r\n        noteTitle.textContent = '';\r\n    }\r\n}\r\n\r\nexport function updateNoteText(textInput, textNote) {\r\n    textNote.innerText = textInput.innerText;\r\n    textNote.style.display = textInput.textContent === '' ? 'none' : 'block';\r\n}\r\n\r\nexport function updateCheckboxes(curContainer, originalContainer) {\r\n    if (window.location.hash === '#trash') {\r\n        return;\r\n    }\r\n\r\n    if (curContainer.innerHTML !== '' && curContainer.childElementCount > 1) {\r\n\r\n        // TODO: ?\r\n        originalContainer.innerHTML = '';\r\n        Array.from(curContainer.cloneNode(true).children).forEach(child => {\r\n            originalContainer.appendChild(child);\r\n        });\r\n\r\n        const currentHeight = parseFloat(curContainer.style.height) || 32;\r\n        originalContainer.style.height = `${currentHeight - 32}px`;\r\n        originalContainer.style.paddingTop = '10px';\r\n\r\n        const emptyCheckbox = originalContainer.querySelector('.empty-checkbox');\r\n        emptyCheckbox.style.display = 'none';\r\n\r\n        originalContainer.querySelectorAll('.checkbox-icon .check-icon').forEach(icon => {\r\n            icon.addEventListener('click', handleCheckboxIconClick);\r\n        });\r\n\r\n        originalContainer.querySelectorAll('.checkbox-delete-button').forEach(button => {\r\n            button.style.display = 'none';\r\n        });\r\n\r\n        originalContainer.querySelectorAll('.checkbox-text').forEach(text => {\r\n            text.contentEditable = 'false';\r\n            text.style.cursor = 'default';\r\n        });\r\n    } else {\r\n        clearContainer(originalContainer);\r\n        originalContainer.style.height = '32px';\r\n    }\r\n}\r\n \r\nexport function updateImages(curContainer, originalContainer) {\r\n    if (curContainer.innerHTML !== '') {\r\n\r\n        // TODO: ?\r\n        originalContainer.innerHTML = '';\r\n        Array.from(curContainer.cloneNode(true).children).forEach(child => {\r\n            originalContainer.appendChild(child);\r\n        });\r\n\r\n        const currentPaddingTop = parseFloat(curContainer.style.paddingTop);\r\n        originalContainer.style.paddingTop = `${currentPaddingTop}%`;\r\n        originalContainer.style.display = curContainer.style.display;\r\n\r\n        originalContainer.querySelector('.img-delete-button').style.display = 'none';\r\n    } else {\r\n        clearContainer(originalContainer);\r\n    }\r\n}\r\n\r\n// TODO: \r\nexport function handleEmptyNote(content, title, curCheckboxesContainer, curImagesContainer, originalCheckboxesContainer, note) {\r\n    if (\r\n        content.textContent === '' &&\r\n        title.textContent === '' &&\r\n        (curCheckboxesContainer.innerHTML === '' ||\r\n            curCheckboxesContainer.childElementCount === 1) &&\r\n        curImagesContainer.innerHTML === ''\r\n    ) {\r\n        if (!note.querySelector('.empty-note')) {\r\n            const emptyNote = createElement('div', 'empty-note', 'Empty note');\r\n            note.querySelector('.note').appendChild(emptyNote);\r\n            emptyNote.addEventListener('click', handleNoteEditClick);\r\n            originalCheckboxesContainer.style.display = 'none';\r\n        }\r\n    } else if (note.querySelector('.empty-note')) {\r\n        note.querySelector('.note').removeChild(note.querySelector('.empty-note'));\r\n    }\r\n}\r\n\r\nexport function resetNoteState() {\r\n    dom.noteEditContainer.style.display = 'none';\r\n    dom.noteEditContainer.innerHTML = '';\r\n    document.body.style.removeProperty('overflow-y');\r\n\r\n    state.currentNote.style.removeProperty('overflow-y');\r\n    state.currentNote.style.removeProperty('max-height');\r\n    state.currentNote = null;\r\n}\r\n\r\nfunction closeEditor() {\r\n    document.body.style.removeProperty('overflow-y');        \r\n    dom.noteEditContainer.style.display = 'none';\r\n    dom.noteEditContainer.innerHTML = '';\r\n    dom.overlay.style.display = 'none';\r\n    state.currentNote = null;\r\n}\r\n\r\nfunction togglePinIcon(pinIcon) {\r\n    if (pinIcon.title === 'Pin note') {\r\n        pinIcon.title = 'Unpin note';\r\n        pinIcon.style.color = 'var(--dim-button-hover-color)';\r\n    }\r\n    else {\r\n        pinIcon.title = 'Pin note';\r\n        pinIcon.style.removeProperty('color');\r\n    }\r\n}","import { createElement } from '../ui.js';\r\n\r\nimport { handleImageIconClick } from '../handlers.js';\r\n\r\nexport function createImagesContainer(img, imagesContainerT) {\r\n    console.log('createImagesContainer');\r\n\r\n    imagesContainerT.innerHTML = '';\r\n    imagesContainerT.style.display = 'block';\r\n    imagesContainerT.style.paddingTop = `${(img.naturalHeight / img.naturalWidth) * 100}%`;\r\n\r\n    const imgContainer = createElement('div', 'img-container');\r\n\r\n    img.className = 'img';\r\n    const imgDeleteButton = createImgDeleteButton(imagesContainerT);\r\n\r\n    imgContainer.appendChild(img);\r\n    imgContainer.appendChild(imgDeleteButton);\r\n\r\n    imagesContainerT.appendChild(imgContainer);\r\n}\r\n\r\nfunction createImgDeleteButton(imagesContainer) {\r\n    const imgDeleteButton = createElement('div', 'img-delete-button img-delete');\r\n    imgDeleteButton.role = 'button';\r\n    imgDeleteButton.tabIndex = '0';\r\n    imgDeleteButton.title = 'Remove image';\r\n    imgDeleteButton.addEventListener('click', () => clearContainer(imagesContainer));\r\n\r\n    const imgDeleteIcon = createElement('i', 'fa-solid fa-trash img-delete');\r\n    imgDeleteButton.appendChild(imgDeleteIcon);\r\n\r\n    return imgDeleteButton;\r\n}\r\n\r\nexport function clearContainer(container) {\r\n    container.innerHTML = '';\r\n    container.style.display = 'none';\r\n    container.style.removeProperty('padding-top');\r\n}\r\n\r\n// ???\r\nexport function initImageFileInput(imagesContainer) {\r\n    console.log('initImageFileInput');\r\n\r\n    const fileInput = createElement('input', 'file-input');\r\n    fileInput.type = 'file';\r\n    fileInput.accept = 'image/png, image/jpeg';\r\n    document.body.appendChild(fileInput);\r\n\r\n    fileInput.addEventListener('change', (e) => {\r\n        handleImageIconClick(e, imagesContainer);\r\n    });\r\n    fileInput.click();\r\n}","import { createIcon, createElement, dom, state } from '../ui.js';\r\n\r\nimport { handleSelectClick, handleNoteEditClick, handlePinIconClick, handleOneNoteColorClick, handleArchiveClick,\r\n    handleDeleteForeverClick, handleRestoreClick, handleMoveToTrashClick\r\n } from '../handlers.js';\r\n\r\nimport { Note, ListItem, fetchImage } from '../backend.js';\r\n\r\nimport { createCheckbox, positionAllCheckboxes } from './checkbox.js';\r\n\r\nimport { createImagesContainer, initImageFileInput } from './image.js';\r\n\r\nimport { updateVisibility, updateNotePositions, getFactWidthForList } from './position.js';\r\n\r\nimport { getTokenOrRedirect } from './auth.js';\r\n\r\nexport function addNoteToList(note) { \r\n    console.log('addNoteToList');\r\n    dom.messageNoContent.style.display = 'none';\r\n\r\n    const boxNote = createNoteContainer(note.color, note.id);\r\n    const selectIcon = createIcon('fa-solid fa-circle-check select-note-icon', 'Select note', handleSelectClick);\r\n    const noteDiv = createElement('div', 'note');\r\n    const noteContent = createNoteContent(note);\r\n    const toolbar = createToolbar(boxNote);\r\n\r\n    noteDiv.appendChild(noteContent);\r\n    noteDiv.appendChild(toolbar);\r\n    boxNote.appendChild(selectIcon);\r\n    boxNote.appendChild(noteDiv);\r\n    dom.notesContainer.insertBefore(boxNote, dom.notesContainer.firstChild);\r\n\r\n    // TODO: \r\n    handleEmptyNoteState(boxNote, note);\r\n}\r\n\r\nfunction handleEmptyNoteState(boxNote, note) {\r\n    const checkboxesContainer = boxNote.querySelector('.checkboxes-container');\r\n    const isEmptyNote = isNoteEmpty(note, checkboxesContainer);\r\n    let emptyNote = boxNote.querySelector('.empty-note');\r\n\r\n    if (isEmptyNote && !emptyNote) {\r\n        emptyNote = createElement('div', 'empty-note', 'Empty note');\r\n        emptyNote.addEventListener('click', handleNoteEditClick);\r\n\r\n        boxNote.querySelector('.note').appendChild(emptyNote);\r\n    } else if (!isEmptyNote && emptyNote) {\r\n        boxNote.querySelector('.note').removeChild(emptyNote);\r\n    }\r\n}\r\n\r\nfunction isNoteEmpty(note, checkboxesContainer) {\r\n    return (!note.title || note.title === '') && (!note.content || note.content === '') &&\r\n           checkboxesContainer.childElementCount < 2 && !note.image;\r\n}\r\n \r\nfunction createNoteContainer(dataColor, dataId) {\r\n    const boxDiv = createElement('div', 'box-note');\r\n    boxDiv.setAttribute('data-selected', 'false');\r\n    boxDiv.setAttribute('data-id', dataId);\r\n    boxDiv.setAttribute('data-color', dataColor || 'none');\r\n    boxDiv.classList.add(dataColor || 'none');\r\n\r\n    const width = localStorage.getItem('displayMode') === 'list' || state.isOneNoteInRow ? getFactWidthForList() - 32 : 240;\r\n    boxDiv.style.width = `${width}px`;\r\n\r\n    return boxDiv;\r\n}\r\n\r\nfunction createNoteContent(note) {\r\n    const textAndTitleDiv = createElement('div', 'text-and-title-note')\r\n    textAndTitleDiv.addEventListener('click', handleNoteEditClick);\r\n\r\n    if (window.location.hash === '#home') {\r\n        const pinIcon = createIcon(\r\n            'fa-solid fa-thumbtack pin-icon', \r\n            note.status === 'pinned' ? 'Unpin note' : 'Pin note',\r\n            handlePinIconClick\r\n        );\r\n\r\n        if (note.status === 'pinned') {\r\n            pinIcon.style.color = 'var(--dim-button-hover-color)';\r\n        }\r\n\r\n        textAndTitleDiv.appendChild(pinIcon);\r\n    }\r\n\r\n    const imagesContainer = createElement('div', 'images-container');\r\n    setupImages(imagesContainer, note.image);\r\n    textAndTitleDiv.appendChild(imagesContainer);\r\n\r\n    const titleDiv = createElement('div', 'note-title-text', note.title);\r\n    titleDiv.style.display = note.title && note.title !== '' ? 'block' : 'none';\r\n    textAndTitleDiv.appendChild(titleDiv);\r\n\r\n    const noteTextDiv = createElement('div', 'note-text', note.content);\r\n    noteTextDiv.style.display = note.content && note.content !== '' ? 'block' : 'none';\r\n    textAndTitleDiv.appendChild(noteTextDiv);\r\n\r\n    const checkboxesContainer = createElement('div', 'checkboxes-container');\r\n    setupCheckboxes(checkboxesContainer, note);\r\n    textAndTitleDiv.appendChild(checkboxesContainer);\r\n\r\n    return textAndTitleDiv;\r\n}\r\n\r\nfunction createToolbar(boxDiv) {\r\n    const toolbarDiv = createElement('div', 'note-toolbar')\r\n\r\n    const leftIcons = document.createElement('div');\r\n    leftIcons.style.display = 'flex';\r\n\r\n    const hash = window.location.hash;\r\n    if (['#home', '#archive', '#search'].includes(hash)) {\r\n        addDefaultNoteIcons(leftIcons, boxDiv, hash);\r\n        toolbarDiv.appendChild(leftIcons);\r\n\r\n        const deleteButton = createDeleteButton();\r\n        toolbarDiv.appendChild(deleteButton);\r\n    }\r\n    else if (hash === '#trash') {\r\n        addTrashNoteIcons(leftIcons);\r\n        toolbarDiv.appendChild(leftIcons);\r\n    }\r\n\r\n    return toolbarDiv;\r\n}\r\n\r\nfunction addDefaultNoteIcons(leftIcons, boxDiv, currentHash) {\r\n    leftIcons.appendChild(createIcon('fas fa-image', 'Add image', () => {\r\n        initImageFileInput(boxDiv.querySelector('.images-container'));\r\n    }));\r\n    leftIcons.appendChild(createIcon('fa-solid fa-palette', 'Change background color', handleOneNoteColorClick));\r\n\r\n    if (currentHash === '#archive') {\r\n        leftIcons.appendChild(createIcon('fa-solid fa-box-open', 'Unarchive', handleArchiveClick));\r\n    } \r\n    else {\r\n        leftIcons.appendChild(createIcon('fa-solid fa-box', 'Archive', handleArchiveClick));\r\n    }\r\n}\r\n\r\nfunction addTrashNoteIcons(leftIcons) {\r\n    leftIcons.appendChild(createIcon('fa-solid fa-trash', 'Delete forever', handleDeleteForeverClick));\r\n    leftIcons.appendChild(createIcon('fa-solid fa-trash-arrow-up', 'Restore', handleRestoreClick));\r\n}\r\n\r\nfunction createDeleteButton() {\r\n    const deleteButton = createElement('button', 'delete-button');\r\n    deleteButton.addEventListener('click', handleMoveToTrashClick);\r\n\r\n    const trashIcon = createIcon('fa-solid fa-xmark', 'Delete');\r\n    deleteButton.appendChild(trashIcon);\r\n\r\n    return deleteButton;\r\n}\r\n\r\nasync function setupImages(imagesContainer, imageUrl) {\r\n    if (!imageUrl) {\r\n        return;\r\n    }\r\n\r\n    try {\r\n        let token = await getTokenOrRedirect();\r\n        if (!token) return;\r\n\r\n        const imageBlobUrl = await fetchImage(imageUrl, token);\r\n        loadImage(imagesContainer, imageBlobUrl);\r\n    } catch (error) {\r\n        console.error('Error loading image:', error);\r\n    }\r\n}\r\n\r\nasync function loadImage(imagesContainer, imageUrl) {\r\n    if (!imageUrl) return null;\r\n\r\n    return new Promise((resolve, reject) => {\r\n        const img = new Image();\r\n        img.onload = function() {\r\n            createImagesContainer(img, imagesContainer);\r\n            imagesContainer.querySelector('.img-delete-button').style.display = 'none';\r\n            updateNotePositions();\r\n            resolve(img);\r\n        };\r\n        img.onerror = function() {\r\n            reject(new Error(`Failed to load image: ${imageUrl}`));\r\n        };\r\n        img.src = imageUrl;\r\n    });\r\n}\r\n\r\nfunction setupCheckboxes(checkboxesContainer, note) {\r\n    if (note.type !== 'list') {\r\n        return;\r\n    }\r\n\r\n    const checkboxesContainerHeight = `${note.list_items.length * 32}px`;\r\n    setContainerStyle(checkboxesContainer, checkboxesContainerHeight, '10px', 'block');\r\n\r\n    note.list_items.forEach(item => {\r\n        const checkbox = createCheckbox(false, item.is_checked, item.text, item.id);\r\n        checkboxesContainer.appendChild(checkbox);\r\n    });\r\n\r\n    checkboxesContainer.appendChild(createCheckbox(true));\r\n    positionAllCheckboxes(checkboxesContainer.querySelector('.checkbox'));\r\n\r\n    checkboxesContainer.querySelector('.empty-checkbox').style.display = 'none';\r\n    hideElements(checkboxesContainer.querySelectorAll('.checkbox-delete-button'));\r\n    disableEditing(checkboxesContainer.querySelectorAll('.checkbox-text'));\r\n}\r\n\r\nfunction setContainerStyle(container, height, paddingTop, display) {\r\n    container.style.height = height;\r\n    container.style.paddingTop = paddingTop;\r\n    container.style.display = display;\r\n}\r\n\r\nfunction hideElements(elements) {\r\n    elements.forEach(element => element.style.display = 'none');\r\n}\r\n\r\nfunction disableEditing(elements) {\r\n    elements.forEach(text => {\r\n        text.contentEditable = 'false';\r\n        text.style.cursor = 'default';\r\n    });\r\n}\r\n\r\nfunction updateNotesContainerState() {\r\n    if (dom.notesContainer.querySelectorAll('.box-note').length === 0) {\r\n        coverNotesContainer();\r\n    }\r\n}\r\n\r\nexport function coverNotesContainer() {\r\n    dom.messageNoContent.style.display = 'flex';\r\n    if (window.location.hash === '#trash') {\r\n        dom.btnEmptyTrash.style.display = 'none';\r\n    }\r\n}\r\n\r\nexport function deleteNoteFromContainer(note) {\r\n    dom.notesContainer.removeChild(note);\r\n    updateVisibility();\r\n    updateNotePositions();\r\n    updateNotesContainerState();\r\n}\r\n\r\nexport function fillNotesContainer(data) {\r\n    console.log('fillNotesContainer', data);\r\n    \r\n    data.map(noteData => {\r\n        let note;\r\n        if (noteData.type === 'list') {\r\n            const listItems = noteData.list_items.map(item => new ListItem(item.id, item.text, item.order, item.is_checked));\r\n            note = new Note(noteData.id, noteData.title, null, noteData.type, noteData.color, \r\n                noteData.status, listItems, noteData.image);\r\n        } else {\r\n            note = new Note(noteData.id, noteData.title, noteData.content, noteData.type, noteData.color, \r\n                noteData.status, noteData.list_items, noteData.image);\r\n        }\r\n        addNoteToList(note);\r\n    });\r\n\r\n    updateVisibility();\r\n    updateNotePositions();\r\n\r\n    if (data.length === 0) {\r\n        dom.messageNoContent.style.display = 'flex';\r\n    }\r\n    else if (window.location.hash === '#trash') {\r\n        dom.btnEmptyTrash.style.display = 'block';\r\n    }\r\n}","import { dom, state } from '../ui.js';\r\n\r\nexport function positionElement(box, button) {\r\n    const windowWidth = window.innerWidth;\r\n    const windowHeight = parseFloat(dom.notesContainer.style.height) + 115;\r\n    const buttonRect = button.getBoundingClientRect();\r\n    const boxRect = box.getBoundingClientRect();\r\n\r\n    let newLeft = buttonRect.left + window.scrollX + 20;\r\n    if (newLeft + boxRect.width > windowWidth) {\r\n        newLeft = windowWidth - boxRect.width - 20;\r\n    }\r\n\r\n    let newTop = buttonRect.bottom + window.scrollY;\r\n    if (newTop + boxRect.height > windowHeight) {\r\n        newTop = windowHeight - boxRect.height - 20;\r\n    }\r\n\r\n    box.style.top = `${newTop}px`;\r\n    box.style.left = `${newLeft}px`;\r\n}\r\n\r\nexport function updateVisibility() {\r\n    const hasPinned = document.querySelectorAll('.box-note i[title=\"Unpin note\"]').length > 0;\r\n    const hasOthers = document.querySelectorAll('.box-note i[title=\"Pin note\"]').length > 0;\r\n\r\n    dom.pinnedText.style.visibility = hasPinned ? 'visible' : 'hidden';\r\n    dom.othersText.style.visibility = hasOthers && hasPinned ? 'visible' : 'hidden';\r\n}\r\n\r\nexport function updateNotePositions() {\r\n    const notes = Array.from(dom.notesCatalog.querySelectorAll('.box-note'));\r\n    const containerWidth = dom.notesContainer.clientWidth;\r\n    const noteWidth = notes.length > 0 ? notes[0].offsetWidth : 240;\r\n    const noteMargin = 16;\r\n    const textMarginBottom = 8;\r\n\r\n    const columnYPositions = new Array(Math.floor(containerWidth / (noteWidth + noteMargin))).fill(0);\r\n\r\n    let currentX = 0;\r\n\r\n    //   \r\n    notes.filter(note => {\r\n        const pinIcon = note.querySelector('.pin-icon');\r\n        return pinIcon && pinIcon.title === 'Unpin note';\r\n    }).forEach(note => {\r\n        const noteHeight = note.offsetHeight;\r\n        let currentY = columnYPositions[currentX / (noteWidth + noteMargin)] || dom.pinnedText.offsetHeight + noteMargin + textMarginBottom;\r\n\r\n        note.style.transform = `translate(${currentX}px, ${currentY}px)`;\r\n\r\n        columnYPositions[currentX / (noteWidth + noteMargin)] = currentY + noteHeight + noteMargin;\r\n        currentX += noteWidth + noteMargin;\r\n\r\n        if (currentX + noteWidth + noteMargin > containerWidth) {\r\n            currentX = 0;\r\n        }\r\n    });\r\n\r\n    //   Others    \r\n    const hasOthers = notes.filter(note => {\r\n        const pinIcon = note.querySelector('.pin-icon');\r\n        return !pinIcon || pinIcon.title !== 'Unpin note';\r\n    }).length > 0;\r\n    if (hasOthers) {\r\n        const maxPinnedY = Math.max(...columnYPositions);\r\n        dom.othersText.style.transform = `translate(0px, ${maxPinnedY}px)`;\r\n\r\n        //  y-   \r\n        columnYPositions.fill(maxPinnedY + dom.othersText.offsetHeight + noteMargin + textMarginBottom);\r\n    } else {\r\n        const maxPinnedY = Math.max(...columnYPositions);\r\n        dom.notesContainer.style.height = `${maxPinnedY + 20}px`;\r\n        return;\r\n    }\r\n\r\n    //   \r\n    currentX = 0;\r\n    notes.filter(note => {\r\n        const pinIcon = note.querySelector('.pin-icon');\r\n        return !pinIcon || pinIcon.title !== 'Unpin note';\r\n    }).forEach(note => {\r\n        const noteHeight = note.offsetHeight;\r\n\r\n        let currentY = columnYPositions[currentX / (noteWidth + noteMargin)];\r\n\r\n        note.style.transform = `translate(${currentX}px, ${currentY}px)`;\r\n\r\n        columnYPositions[currentX / (noteWidth + noteMargin)] = currentY + noteHeight + noteMargin;\r\n        currentX += noteWidth + noteMargin;\r\n\r\n        if (currentX + noteWidth + noteMargin > containerWidth) {\r\n            currentX = 0;\r\n        }\r\n    });\r\n\r\n    const maxNoteYPosition = Math.max(...columnYPositions);\r\n    dom.notesContainer.style.height = `${maxNoteYPosition + 20}px`;\r\n    console.log('end position notes');\r\n}\r\n\r\nexport function getFactWidthForList() {\r\n    const containerWidth = window.innerWidth - state.offsetMenuWidth;\r\n    const maxWidth = 632;\r\n\r\n    return containerWidth <= maxWidth ? containerWidth * 0.96 : maxWidth;\r\n}\r\n\r\nexport function adjustNoteEditBoxWidth() {\r\n    const note = dom.noteEditContainer.querySelector('.box-note');\r\n    if (note) {\r\n        const screenWidth = window.innerWidth;\r\n        note.style.width = screenWidth >= 715 ? '600px' : '85vw';\r\n    }\r\n}\r\n\r\nexport function updateListNotesContainerWidth() {\r\n    state.isOneNoteInRow = true;\r\n    const factWidth = getFactWidthForList();\r\n\r\n    const notes = Array.from(document.querySelectorAll('.box-note'));\r\n    notes.forEach(note => {\r\n        note.style.width = `${factWidth - 32}px`;\r\n    });\r\n\r\n    dom.noteCreate.style.width = `${factWidth - 32}px`;\r\n    dom.notesCatalog.style.width = `${factWidth}px`;\r\n    updateNotePositions();\r\n}\r\n\r\nexport function updateGridNotesContainerWidth() {\r\n    const containerWidth = window.innerWidth - state.offsetMenuWidth;\r\n    const noteWidth = 240;\r\n    const noteMargin = 16;\r\n\r\n    let notesQuantity = Math.floor((containerWidth - noteMargin) / (noteWidth + noteMargin));\r\n    let factWidth = notesQuantity * (noteWidth + noteMargin) + noteMargin;\r\n    \r\n    if (localStorage.getItem('displayMode') === 'list' || notesQuantity === 1 || (notesQuantity === 2 && containerWidth === factWidth)) {\r\n        updateListNotesContainerWidth();\r\n    }\r\n    else {\r\n        state.isOneNoteInRow = false;\r\n        if (containerWidth === factWidth) {\r\n            notesQuantity--;\r\n            factWidth = notesQuantity * (noteWidth + noteMargin) + noteMargin;\r\n        }\r\n\r\n        dom.noteCreate.style.width = `${getFactWidthForList() - 32}px`;\r\n        dom.notesCatalog.style.width = `${factWidth}px`;\r\n        \r\n        const notes = Array.from(dom.notesCatalog.querySelectorAll('.box-note'));\r\n        notes.forEach(note => {\r\n            note.style.width = `${240}px`\r\n        });\r\n\r\n        updateNotePositions();\r\n    }\r\n}","import { dom, state, createButton } from '../ui.js';\r\n\r\nimport { handlePinSelection, handleBackgroundSelection, handleArchiveSelection, handleDeleteSelection,\r\n    handleUnarchiveSelection, handleDeleteForeverSelection, handleRestoreSelection\r\n } from '../handlers.js';\r\n\r\nimport { updateNoteOnServer } from '../backend.js';\r\n\r\nimport { getTokenOrRedirect } from './auth.js';\r\n\r\nimport { deleteNoteFromContainer } from './note.js';\r\n\r\nexport function updateSelectedCount(count) {\r\n    dom.textSelection.textContent = `${count} selected`;\r\n}\r\n\r\nexport function hideSelectMode() {\r\n    dom.headerSelection.removeAttribute('style');\r\n\r\n    const boxNotes = document.querySelectorAll('.box-note');\r\n    boxNotes.forEach(note => {\r\n        note.classList.remove('selected');\r\n        note.setAttribute('data-selected', 'false');\r\n    });\r\n\r\n    const selectIcons = document.querySelectorAll('.select-note-icon');\r\n    selectIcons.forEach(icon => {\r\n        icon.classList.remove('visible');\r\n    });\r\n\r\n    state.selectedCount = 0;\r\n    state.selectedNotes.splice(0, state.selectedNotes.length);\r\n}\r\n\r\nexport function fillSelectToolbar() {\r\n    const toolbar = dom.headerSelection.querySelector('.select-toolbar');\r\n    toolbar.innerHTML = '';\r\n\r\n    const currentHash = window.location.hash;\r\n    const buttonConfigs = getButtonConfigs(currentHash);\r\n\r\n    buttonConfigs.forEach(config => {\r\n        const button = createButton(config.id, config.iconClass, config.label);\r\n        toolbar.appendChild(button);\r\n        button.addEventListener('click', config.handler);\r\n    });\r\n}\r\n\r\nfunction getButtonConfigs(hash) {\r\n    const commonButtons = [\r\n        { id: 'btn-pin-selection', iconClass: 'fa-thumbtack', label: 'Pin', handler: handlePinSelection },\r\n        { id: 'btn-background-selection', iconClass: 'fa-palette', label: 'Background options', handler: handleBackgroundSelection }\r\n    ];\r\n\r\n    const hashSpecificButtons = {\r\n        '#home': [\r\n            ...commonButtons,\r\n            { id: 'btn-archive-selection', iconClass: 'fa-box', label: 'Archive', handler: handleArchiveSelection },\r\n            { id: 'btn-delete-selection', iconClass: 'fa-trash', label: 'Delete', handler: handleDeleteSelection }\r\n        ],\r\n        '#search': [\r\n            ...commonButtons,\r\n            { id: 'btn-archive-selection', iconClass: 'fa-box', label: 'Archive', handler: handleArchiveSelection },\r\n            { id: 'btn-delete-selection', iconClass: 'fa-trash', label: 'Delete', handler: handleDeleteSelection }\r\n        ],\r\n        '#archive': [\r\n            ...commonButtons,\r\n            { id: 'btn-unarchive-selection', iconClass: 'fa-box-open', label: 'Unarchive', handler: handleUnarchiveSelection },\r\n            { id: 'btn-delete-selection', iconClass: 'fa-trash', label: 'Delete', handler: handleDeleteSelection }\r\n        ],\r\n        '#trash': [\r\n            { id: 'btn-delete-forever-selection', iconClass: 'fa-trash', label: 'Delete forever', handler: handleDeleteForeverSelection },\r\n            { id: 'btn-restore-selection', iconClass: 'fa-trash-arrow-up', label: 'Restore', handler: handleRestoreSelection }\r\n        ]\r\n    };\r\n\r\n    return hashSpecificButtons[hash] || [];\r\n}\r\n\r\nexport async function modifySelectedNotes(payload) {\r\n    state.selectedNotes.forEach(async note => {\r\n        const noteElement = note.closest('.box-note');\r\n        const noteId = noteElement.getAttribute('data-id');\r\n\r\n        let token = await getTokenOrRedirect();\r\n        if (!token) return;\r\n\r\n        try {\r\n            updateNoteOnServer(noteId, payload, token);\r\n        } catch(error) {\r\n            console.log('Error: ', error);\r\n        }\r\n\r\n        deleteNoteFromContainer(noteElement);\r\n    });\r\n}","import { createElement } from '../ui.js';\r\n\r\nimport { handleThemeMenuItemClick } from '../handlers.js';\r\n\r\nexport function openSettingMenu(settingMenu) {\r\n    settingMenu.style.removeProperty('display');\r\n    settingMenu.tabIndex = '0';\r\n}\r\n\r\nexport function createSettingMenu() {\r\n    const settingMenu = createElement('div', 'setting-menu');\r\n    settingMenu.role = 'menu';\r\n\r\n    const themeMenuItem = createSettingMenuItem('Switch theme', handleThemeMenuItemClick);\r\n    settingMenu.appendChild(themeMenuItem);\r\n\r\n    return settingMenu;\r\n}\r\n\r\nfunction createSettingMenuItem(text, clickHandler) {\r\n    const menuItem = createElement('div', 'setting-menu-item');\r\n    menuItem.role = 'menuitem';\r\n\r\n    const menuItemText = createElement('div', 'setting-menu-item-text', text);\r\n    menuItem.appendChild(menuItemText);\r\n    menuItem.addEventListener('click', clickHandler);\r\n\r\n    return menuItem;\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { initUI } from './ui.js';\r\nimport { initHandlers } from './handlers.js';\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    initUI();\r\n    initHandlers();\r\n});"],"names":["API_URL","process","env","REACT_APP_API_URL","URL_NOTES_SERVICE","URL_AUTH_SERVICE","expiresIn","ListItem","constructor","id","text","order","is_checked","Note","title","content","type","color","status","list_items","image","getAccessToken","token","localStorage","getItem","expiry","now","Date","getTime","refreshToken","response","fetch","method","headers","body","JSON","stringify","refresh","ok","removeItem","Error","data","json","access_token","access","refresh_token","expiryTime","setItem","getUserInfo","updateUser","payload","first_name","getNotesFromServer","params","url","Object","keys","forEach","key","value","finalUrl","slice","console","log","reverse","getDefaultNotesFromServer","getArchivedNotesFromServer","getDeletedNotesFromServer","deleteNoteOnServer","noteId","updateNoteOnServer","formData","FormData","hasOwnProperty","append","item","index","archiveNote","isArchived","moveToTrashNote","restoreNote","searchNotes","searchText","search","encodeURIComponent","loginUser","email","password","errors","detail","registerUser","userData","createNote","fetchImage","blob","URL","createObjectURL","checkIfEmailExistsAlready","updateCheckbox","itemId","deleteImage","unfoldNoteInput","foldNoteInput","updateContentUIFromHash","loadDisplayMode","loadTheme","state","dom","deleteCheckbox","createSignUpWindow","showLoginForm","showRegistrationForm","getTokenOrRedirect","createCheckbox","insertNewCheckbox","focusOnNewCheckbox","splitTextAtCursor","createAndInsertNewCheckbox","clearCheckboxesContainer","shiftAllCheckboxesDown","shiftAllCheckboxesUp","setupNoteEditElements","pinNote","updateNoteEditIcons","updateNoteColor","updateNoteTitle","updateNoteText","updateCheckboxes","updateImages","handleEmptyNote","resetNoteState","addNoteToList","fillNotesContainer","deleteNoteFromContainer","createAccountContainer","hideAccountContainer","clearAccountContainer","showAccountContainer","positionElement","updateVisibility","updateNotePositions","adjustNoteEditBoxWidth","updateListNotesContainerWidth","updateGridNotesContainerWidth","createImagesContainer","clearContainer","initImageFileInput","updateSelectedCount","hideSelectMode","modifySelectedNotes","openSettingMenu","createSettingMenu","createColorToolbar","applyColorToNotes","initHandlers","window","addEventListener","header","document","querySelector","scrollY","classList","add","remove","event","settingMenu","windowWidth","innerWidth","settingButtonRect","btnSettings","getBoundingClientRect","settingMenuPlace","newLeft","left","scrollX","width","style","top","bottom","handleClickOutsideNoteForm","handleClickOutsideChangeBackground","handleClickOutsideUserAccount","handleClickOutsideSelectMode","handleClickOutsideSettingMenu","btnMenuArchive","location","hash","btnMenuTrash","btnMenuNotes","inputNoteCreate","isNoteInputUnfolded","height","scrollHeight","inputTitleCreate","preventDefault","focus","inputSearch","btnClearSearch","visibility","trim","notesContainer","innerHTML","removeProperty","noteCreate","display","appendChild","pinnedText","othersText","error","searchContainer","formSearch","btnClearSelection","selectedCount","btnMenuToggle","offsetMenuWidth","isMenuOpen","sidebarNav","toggle","sideBar","btnViewToggle","className","overlay","isNoteModificationMode","submitNoteModifications","isSettingWindowOpen","signUpWindow","removeChild","stopPropagation","btnEmptyTrash","notes","Array","from","querySelectorAll","Promise","all","map","note","getAttribute","btnImageCreate","imagesContainer","btnListCreate","isListItemsAddMode","checkboxesContainer","formNoteCreate","insertBefore","inputGroupCreate","btnLogin","isSettingMenuOpen","btnEnterSearch","backgroundColor","activeElement","submitNote","btnBackgroundCreate","handleOneNoteColorClick","target","closest","changeBackground","contains","userAccount","selectIconClicked","clickedInsideSelectHeader","headerSelection","tabIndex","removeFromArray","array","indexOf","splice","handleThemeMenuItemClick","handleSignUpButtonClick","overflowY","handleEmailCheckClick","signUpInputContainer","emailInput","signUpSubmitButton","exists","handleLoginClick","removeEventListener","handleRegisterClick","handleTitleEditInput","titleTextInput","titlePlaceHolder","textContent","handleTitleEditKeydown","handleTextEditInput","textEdit","textPlaceHolder","handleEmptyCheckboxKeydown","handleCheckboxFocus","parentNode","opacity","handleCheckboxBlur","handleImageIconClick","file","files","alert","maxSizeInBytes","size","img","Image","onload","maxPixels","pixels","src","targetElement","choosenColor","handleSelectClick","selectIcon","currentTarget","isSelected","transform","setAttribute","selectedNotes","push","handleMoveToTrashClick","handleArchiveClick","handleRestoreClick","noteElement","handleDeleteForeverClick","handlePinIconClick","handleNoteEditClick","currentNote","children","find","child","originalBoxNote","noteEdit","cloneNode","position","margin","maxHeight","noteEditContainer","handleColorOptionClick","colorOption","highlightChosenColor","split","selectedOption","option","handleCheckboxKeydown","checkboxText","oneCheckbox","cursorPosition","getSelection","getRangeAt","endOffset","cursorAtEnd","length","nextCheckbox","nextElementSibling","remainingText","newCheckbox","handleCheckboxIconClick","icon","handleEditorCheckboxClick","isChecked","textDecoration","handleCheckboxDeleteClick","checkbox","currentHeight","parseFloat","next","prev","previousElementSibling","handleCheckboxBackspace","container","childElementCount","handleEmptyCheckboxInput","emailError","click","handleLoginErrors","passwordError","confirmError","firstNameError","lastNameError","clearMessages","password2","last_name","handleRegistrationErrors","messages","message","errorElements","join","errorContainer","handleSignOutButtonClick","clear","hasCheckboxes","hasText","hasTitle","hasImages","getNoteFile","listItems","getListItems","createNoteObject","imgElement","startsWith","File","checkIcon","curTitle","curText","curBoxNote","curCheckboxesContainer","curImagesContainer","originalTitle","originalText","originalCheckboxesContainer","originalImagesContainer","getListItemsFrom","innerText","handleServerResponse","checkboxElement","handlePinSelection","pinIcon","handleBackgroundSelection","getCommonColor","firstColor","every","handleArchiveSelection","handleUnarchiveSelection","handleDeleteSelection","handleDeleteForeverSelection","boxNote","handleRestoreSelection","handleEditAccountClick","fillSelectToolbar","coverNotesContainer","getTokenOrCoverContainer","isOneNoteInRow","initUI","getElementById","textSelection","notesCatalog","messageNoContent","messageTrash","iconNoContent","textNoContent","btnSubmitCreate","actionsNoteCreate","createElement","tag","attributes","element","entries","createIcon","eventHandler","createButton","buttonId","iconClass","button","mode","theme","updateTheme","isDarkTheme","fontSize","flexDirection","alignItems","boxShadow","removeAttribute","updateContentUI","activeButton","noContentIconClass","noContentTextContent","buttons","updateButtonState","updateNoContentMessage","hideUIElements","hashActions","#archive","#trash","#home","#search","accountContainer","btnCloseAccount","createCloseAccountButton","accountContent","isAuthorized","createEmailContainer","accountInfo","createAccountInfo","accountManage","createAccountManageSection","account","role","closeIcon","emailContainer","emailText","accountImageIcon","accountImage","accountNickname","getGreetingText","accountDescription","userName","editAccountButton","createEditAccountButton","signOutButton","createSignOutButton","signUpButton","createSignUpButton","justifyContent","marginTop","signOutIcon","signOutIconContainer","signOutText","minHeight","suggestToSignUp","signUpHeader","signUpContainer","signUpForm","createSignUpForm","thirdPartyAuth","createThirdPartyAuthSection","createSignUpInputContainer","signUpSubmitButtonContainer","createSignUpSubmitButtonContainer","createInputContainer","separator","googleLoginButton","createGoogleLoginButton","googleIcon","createTextNode","fields","placeholder","errorClass","field","inputContainer","passwordContainer","inputClass","input","isEmpty","checkboxIconContainer","createCheckboxIconContainer","checkboxInput","createCheckboxInput","checkboxIcon","createCheckboxIcon","cursor","checkboxPlaceholder","createCheckboxPlaceholder","createCheckboxText","checkboxDeleteButton","createCheckboxDeleteButton","isDefault","contentEditable","spellcheck","checkboxDeleteIcon","originalCheckbox","parent","newCheckboxText","range","createRange","selection","selectNodeContents","collapse","removeAllRanges","addRange","adjustCheckboxPosition","referenceCheckbox","offset","currentTransform","currentY","match","shiftAllCheckboxes","startingCheckbox","distance","direction","directionMultiplier","positionAllCheckboxes","currentShift","colors","chosenColor","isMultiSelect","colorToolbar","newColorToolbar","colorOptions","createOptionsContainer","colorOptionsContainer","tabindex","createColorOption","selectColorIcon","noColorIcon","c","editorNote","emptyNote","imageIcon","paletteIcon","moveToTrashButton","closeEditor","togglePinIcon","originalPinIcon","archiveIcon","deleteForeverIcon","restoreIcon","setupEditTitle","setupEditCheckboxes","setupEditImages","setupEditText","firstChild","editorNoteText","toggleNoteDisplay","textPlaceholder","textEditable","createEditableElement","setupTextContent","editorNoteTitle","toggleTitleDisplay","titlePlaceholder","titleEditable","inputHandler","editableElement","imgDeleteButton","emptyCheckbox","noteTitle","textInput","textNote","curContainer","originalContainer","paddingTop","currentPaddingTop","imagesContainerT","naturalHeight","naturalWidth","imgContainer","createImgDeleteButton","imgDeleteIcon","fileInput","accept","e","getFactWidthForList","createNoteContainer","noteDiv","noteContent","createNoteContent","toolbar","createToolbar","handleEmptyNoteState","isEmptyNote","isNoteEmpty","dataColor","dataId","boxDiv","textAndTitleDiv","setupImages","titleDiv","noteTextDiv","setupCheckboxes","toolbarDiv","leftIcons","includes","addDefaultNoteIcons","deleteButton","createDeleteButton","addTrashNoteIcons","currentHash","trashIcon","imageUrl","imageBlobUrl","loadImage","resolve","reject","onerror","checkboxesContainerHeight","setContainerStyle","hideElements","disableEditing","elements","updateNotesContainerState","noteData","box","windowHeight","buttonRect","boxRect","newTop","hasPinned","hasOthers","containerWidth","clientWidth","noteWidth","offsetWidth","noteMargin","textMarginBottom","columnYPositions","Math","floor","fill","currentX","filter","noteHeight","offsetHeight","maxPinnedY","max","maxNoteYPosition","maxWidth","screenWidth","factWidth","notesQuantity","count","boxNotes","selectIcons","buttonConfigs","getButtonConfigs","config","label","handler","commonButtons","hashSpecificButtons","themeMenuItem","createSettingMenuItem","clickHandler","menuItem","menuItemText"],"sourceRoot":""}